--Query--
SELECT *, 'x' FROM t1 ORDER BY a
--Result--
[(1, 8, 1, 'x'), (2, 11, 0, 'x'), (3, 4, 0, 'x')]
+--------------------+
--Query--
SELECT *, 'x' FROM t1 ORDER BY a
--Result--
[(1, 8, 1, 'x'), (2, 11, 0, 'x'), (3, 4, 0, 'x')]
+--------------------+
--Query--
WITH nx(a,b) AS (VALUES(1,8),(2,11),(3,1),(2,15),(1,4),(1,99))   INSERT INTO t1(a,b) SELECT a, b FROM nx WHERE true     ON CONFLICT(a) DO UPDATE SET b=excluded.b, c=c+1 WHERE t1.b<excluded.b
--Result--
[]
+--------------------+
--Query--
SELECT *, 'x' FROM t1 ORDER BY a
--Result--
[(1, 99, 2, 'x'), (2, 15, 1, 'x'), (3, 4, 0, 'x')]
+--------------------+
--Query--
WITH nx(a,b) AS (VALUES(1,8),(2,11),(3,1),(2,15),(1,4),(1,99))   INSERT INTO main.t1 AS t2(a,b) SELECT a, b FROM nx WHERE true     ON CONFLICT(a) DO UPDATE SET b=excluded.b, c=t2.c+1 WHERE t2.b<excluded.b
--Result--
[]
+--------------------+
--Query--
SELECT *, 'x' FROM t1 ORDER BY a
--Result--
[(1, 99, 2, 'x'), (2, 15, 1, 'x'), (3, 4, 0, 'x')]
+--------------------+
--Query--
SELECT *, 'x' FROM t1 ORDER BY a
--Result--
[(1, 2, 0, 'x'), (3, 4, 0, 'x')]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1
--Result--
[(1, 2, 1)]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM record
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1
--Result--
[(1, 2, 1)]
+--------------------+
