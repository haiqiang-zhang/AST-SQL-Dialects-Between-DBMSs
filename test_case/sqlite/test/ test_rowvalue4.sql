CREATE INDEX t1bac ON t1(b, a, c);
CREATE TABLE t2(a, b, c, d);
INSERT INTO t2 VALUES(1, 1, 1,   1);
INSERT INTO t2 VALUES(1, 1, 2,   2);
INSERT INTO t2 VALUES(1, 1, 3,   3);
INSERT INTO t2 VALUES(1, 2, 1,   4);
INSERT INTO t2 VALUES(1, 2, 2,   5);
INSERT INTO t2 VALUES(1, 2, 3,   6);
INSERT INTO t2 VALUES(1, 3, 1,   7);
INSERT INTO t2 VALUES(1, 3, 2,   8);
INSERT INTO t2 VALUES(1, 3, 3,   9);
INSERT INTO t2 VALUES(2, 1, 1,   10);
INSERT INTO t2 VALUES(2, 1, 2,   11);
INSERT INTO t2 VALUES(2, 1, 3,   12);
INSERT INTO t2 VALUES(2, 2, 1,   13);
INSERT INTO t2 VALUES(2, 2, 2,   14);
INSERT INTO t2 VALUES(2, 2, 3,   15);
INSERT INTO t2 VALUES(2, 3, 1,   16);
INSERT INTO t2 VALUES(2, 3, 2,   17);
INSERT INTO t2 VALUES(2, 3, 3,   18);
INSERT INTO t2 VALUES(3, 1, 1,   19);
INSERT INTO t2 VALUES(3, 1, 2,   20);
INSERT INTO t2 VALUES(3, 1, 3,   21);
INSERT INTO t2 VALUES(3, 2, 1,   22);
INSERT INTO t2 VALUES(3, 2, 2,   23);
INSERT INTO t2 VALUES(3, 2, 3,   24);
INSERT INTO t2 VALUES(3, 3, 1,   25);
INSERT INTO t2 VALUES(3, 3, 2,   26);
INSERT INTO t2 VALUES(3, 3, 3,   27);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
CREATE INDEX t2abc ON t2(a, b, c);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
CREATE INDEX t2d ON t2(d);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
SELECT (2, 1) IN (SELECT a, b FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 9);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 10);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d DESC LIMIT 1);
SELECT (3, 3) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (1, NULL) = (SELECT a, b FROM t2 ORDER BY d ASC LIMIT 1);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d DESC LIMIT 1 OFFSET 2);
SELECT (3, 1) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (1, NULL) = (SELECT b, c FROM t2 ORDER BY d ASC LIMIT 1 OFFSET 2);
SELECT (3, 3) = (SELECT max(a), max(b) FROM t2);
SELECT (3, 1) = (SELECT max(a), min(b) FROM t2);
SELECT (NULL, NULL) = (SELECT max(a), min(b) FROM t2);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 11);
SELECT (2, 1) IN (SELECT a, b FROM t2 ORDER BY d LIMIT 5 OFFSET 12);
CREATE TABLE d1(x, y);
CREATE TABLE d2(a, b, c);
CREATE INDEX d2ab ON d2(a, b);
CREATE INDEX d2c ON d2(c);
WITH i(i) AS (
    VALUES(1) UNION ALL SELECT i+1 FROM i WHERE i<1000
  )
  INSERT INTO d2 SELECT i/100, i%100, i/100 FROM i;
ANALYZE;
CREATE TABLE e1(a, b, c, d, e);
CREATE INDEX e1ab ON e1(a, b);
CREATE INDEX e1cde ON e1(c, d, e);
CREATE TABLE f1(a, b, c);
CREATE INDEX f1ab ON f1(a, b);
SELECT (a COLLATE nocase, b) IN (SELECT a, b FROM f1) FROM f1;
PRAGMA foreign_keys = OFF;
DROP table "t1";
DROP table "t2";
DROP table "d1";
DROP table "d2";
DROP table "e1";
DROP table "f1";
CREATE TABLE c1(x, y);
CREATE TABLE c2(a, b, c);
CREATE INDEX c2ab ON c2(a, b);
CREATE INDEX c2c ON c2(c);
CREATE TABLE c3(d);
