CREATE VIEW v1 AS SELECT * FROM t1;
CREATE TABLE t2(x INTEGER PRIMARY KEY, y, z UNIQUE);
CREATE INDEX t2y ON t2(y);
CREATE TABLE t3(q, r, s);
CREATE INDEX t3rs ON t3(r+s);
ALTER TABLE t1 DROP COLUMN b;
SELECT sql FROM sqlite_schema WHERE name = 't1';
ALTER TABLE t1 DROP COLUMN c;
SELECT sql FROM sqlite_schema WHERE name = 't1';
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
CREATE TABLE t12(a, b, c, CHECK(c>10));
CREATE TABLE t13(a, b, c CHECK(c>10));
ALTER TABLE t13 DROP COLUMN c;
CREATE TABLE 'my table'(a, b PRIMARY KEY, c AS (a+b) , d);
INSERT INTO "my table"(a, b, d) VALUES(1, 2, 'hello');
INSERT INTO "my table"(a, b, d) VALUES(3, 4, 'world');
SELECT * FROM "my table";
ALTER TABLE "my table" DROP COLUMN c;
SELECT * FROM "my table";
CREATE TABLE x1(a, b, c PRIMARY KEY, d AS (b+c) , e);
INSERT INTO x1(a, b, c, e) VALUES(1, 2, 3, 4);
INSERT INTO x1(a, b, c, e) VALUES(5, 6, 7, 8);
INSERT INTO x1(a, b, c, e) VALUES(9, 10, 11, 12);
SELECT * FROM x1;
ALTER TABLE x1 DROP COLUMN a;
SELECT * FROM x1;
ALTER TABLE x1 DROP COLUMN e;
SELECT * FROM x1;
SELECT * FROM "my table";
SELECT * FROM "my table";
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM "my table";
SELECT * FROM "my table";
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM "my table";
SELECT * FROM "my table";
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM "my table";
SELECT * FROM "my table";
SELECT * FROM x1;
SELECT * FROM x1;
SELECT * FROM x1;
CREATE TABLE p1(a PRIMARY KEY, b UNIQUE);
CREATE TABLE c1(x, y, z REFERENCES p1(c));
CREATE TABLE c2(x, y, z, w REFERENCES p1(b));
ALTER TABLE c1 DROP COLUMN z;
ALTER TABLE c2 DROP COLUMN z;
SELECT sql FROM sqlite_schema WHERE name IN ('c1', 'c2');
ALTER TABLE c1 DROP COLUMN x;
DROP VIEW v1;
CREATE VIEW v1 AS SELECT x, y FROM c1;
PRAGMA writable_schema=ON;
UPDATE sqlite_schema SET sql='CREATE INDEX t1b ON t1(b)' WHERE name='t2';
PRAGMA writable_schema=OFF;
PRAGMA writable_schema=ON;
UPDATE sqlite_schema SET sql='CREATE VIEW t2(x,y,z) AS SELECT b,a,c FROM t1'
   WHERE name='t2';
PRAGMA writable_schema=OFF;
SELECT sql FROM sqlite_schema;
SELECT * FROM t1;
PRAGMA writable_schema = 1;
UPDATE sqlite_schema 
  SET sql = 'CREATE TABLE t1(a INTEGER PRIMARY KEY AUTOINCREMENT, b)';
SELECT sql FROM sqlite_schema;
