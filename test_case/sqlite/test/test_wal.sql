SELECT * FROM sqlite_master;
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
INSERT INTO t1 VALUES(5, 6);
INSERT INTO t1 VALUES(7, 8);
INSERT INTO t1 VALUES(9, 10);
SELECT * FROM t1;
BEGIN;
SELECT * FROM t1;
INSERT INTO t1 VALUES(11, 12);
SELECT * FROM t1;
SELECT * FROM t1;
INSERT INTO t1 VALUES(13, 14);
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
BEGIN;
DELETE FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
PRAGMA cache_size = 10;
INSERT INTO t1 VALUES('x', 'y');
SELECT count(*) FROM t1;
PRAGMA integrity_check;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES('a', 'b');
SELECT * FROM t1;
PRAGMA cache_size = 10;
INSERT INTO t1 VALUES('x', 'y');
PRAGMA integrity_check;
CREATE TEMP TABLE t2(a, b);
INSERT INTO t2 VALUES(1, 2);
BEGIN;
INSERT INTO t2 VALUES(3, 4);
SELECT * FROM t2;
SELECT * FROM t2;
CREATE TEMP TABLE t3(x UNIQUE);
BEGIN;
INSERT INTO t2 VALUES(3, 4);
INSERT INTO t3 VALUES('abc');
SELECT * FROM t2;
PRAGMA page_size = 512;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 1024;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 2048;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 4096;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 512;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 1024;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 2048;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 4096;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
PRAGMA page_size = 1024;
INSERT INTO t1 VALUES(1, 2);
PRAGMA wal_checkpoint;
PRAGMA auto_vacuum = 1;
PRAGMA journal_mode = wal;
PRAGMA auto_vacuum;
PRAGMA page_size = 1024;
PRAGMA wal_checkpoint;
DELETE FROM t1 WHERE rowid<54;
PRAGMA wal_checkpoint;
PRAGMA cache_size=2000;
PRAGMA integrity_check;
PRAGMA integrity_check;
PRAGMA wal_checkpoint;
PRAGMA integrity_check;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
SELECT * FROM t1;
BEGIN;
INSERT INTO t1 VALUES(3, 4);
INSERT INTO t1 VALUES(5, 6);
INSERT INTO t1 VALUES(9, 10);
BEGIN;
SELECT * FROM t1;
INSERT INTO t1 VALUES(9, 10);
BEGIN;
INSERT INTO t1 VALUES(9, 10);
SELECT * FROM t1;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(11, 12);
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(13, 14);
SELECT * FROM t1;
SELECT * FROM t1;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(15, 16);
SELECT * FROM t1;
INSERT INTO t1 VALUES(19, 20);
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
BEGIN;
SELECT * FROM t1;
INSERT INTO t1 VALUES(23, 24);
SELECT * FROM t1;
SELECT * FROM t1;
DELETE FROM t1;
INSERT INTO t1 VALUES('a', 'b');
INSERT INTO t1 VALUES('c', 'd');
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(1, 2);
SELECT * FROM t1;
BEGIN;
INSERT INTO t1 VALUES(3, 4);
INSERT INTO t1 VALUES(5, 6);
INSERT INTO t1 VALUES(9, 10);
BEGIN;
SELECT * FROM t1;
INSERT INTO t1 VALUES(9, 10);
BEGIN;
INSERT INTO t1 VALUES(9, 10);
SELECT * FROM t1;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(11, 12);
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(13, 14);
SELECT * FROM t1;
SELECT * FROM t1;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(15, 16);
SELECT * FROM t1;
INSERT INTO t1 VALUES(19, 20);
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
BEGIN;
SELECT * FROM t1;
INSERT INTO t1 VALUES(23, 24);
SELECT * FROM t1;
SELECT * FROM t1;
DELETE FROM t1;
INSERT INTO t1 VALUES('a', 'b');
INSERT INTO t1 VALUES('c', 'd');
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
PRAGMA cache_size = 10;
PRAGMA page_size = 1024;
PRAGMA wal_checkpoint;
BEGIN;
PRAGMA integrity_check;
PRAGMA integrity_check;
PRAGMA wal_checkpoint;
PRAGMA cache_size = 10;
BEGIN;
PRAGMA integrity_check;
PRAGMA page_size = 1024;
CREATE TABLE t2(x, y);
INSERT INTO t1 VALUES('A', 1);
PRAGMA synchronous = normal;
INSERT INTO t2 VALUES('B', 1);
SELECT * FROM t2;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
PRAGMA wal_checkpoint;
SELECT * FROM t2;
SELECT * FROM t2;
PRAGMA wal_checkpoint;
CREATE INDEX i1 on t1(b);
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 1024;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES(1, 2);
BEGIN;
INSERT INTO t1 VALUES(3, 4);
BEGIN;
SELECT * FROM t1;
ATTACH 'test2.db' AS aux;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA main.auto_vacuum = 0;
PRAGMA aux.auto_vacuum = 0;
PRAGMA main.journal_mode = WAL;
PRAGMA aux.journal_mode = WAL;
PRAGMA main.synchronous = NORMAL;
PRAGMA aux.synchronous = NORMAL;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
CREATE TABLE t(x);
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA auto_vacuum = 0;
PRAGMA page_size = 512;
PRAGMA cache_size = -2000;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = FULL;
BEGIN;
PRAGMA page_size = 1024;
PRAGMA auto_vacuum = 0;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = OFF;
INSERT INTO t1 VALUES(0, 0);
PRAGMA wal_checkpoint;
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
INSERT INTO t1 VALUES(5, 6);
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
SELECT * FROM t1;
PRAGMA integrity_check;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
SELECT * FROM t1;
INSERT INTO t1 VALUES(5, 6);
SELECT * FROM t1;
SELECT * FROM t1;
PRAGMA wal_checkpoint;
PRAGMA integrity_check;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
INSERT INTO t1 VALUES(5, 6);
INSERT INTO t1 VALUES(7, 8);
INSERT INTO t1 VALUES(9, 10);
INSERT INTO t1 VALUES(11, 12);
SELECT * FROM t1;
PRAGMA integrity_check;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES(1, 2);
INSERT INTO t1 VALUES(3, 4);
SELECT * FROM t1;
SELECT * FROM t1;
DELETE FROM t1;
PRAGMA wal_checkpoint;
PRAGMA cache_size = 200;
PRAGMA incremental_vacuum;
PRAGMA wal_checkpoint;
