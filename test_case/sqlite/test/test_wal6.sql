SELECT * FROM t1;
PRAGMA journal_mode=WAL;
INSERT INTO t1 VALUES(3,4);
SELECT * FROM t1 ORDER BY a;
SELECT * FROM t1 ORDER BY a;
PRAGMA journal_mode = persist;
SELECT * FROM t1;
PRAGMA journal_mode=WAL;
SELECT * FROM t1 ORDER BY a;
SELECT * FROM t1 ORDER BY a;
PRAGMA journal_mode = truncate;
SELECT * FROM t1;
PRAGMA journal_mode=WAL;
SELECT * FROM t1 ORDER BY a;
SELECT * FROM t1 ORDER BY a;
PRAGMA journal_mode = memory;
SELECT * FROM t1;
PRAGMA journal_mode=WAL;
SELECT * FROM t1 ORDER BY a;
SELECT * FROM t1 ORDER BY a;
PRAGMA journal_mode = off;
SELECT * FROM t1;
PRAGMA journal_mode=WAL;
SELECT * FROM t1 ORDER BY a;
SELECT * FROM t1 ORDER BY a;
PRAGMA journal_mode = WAL;
INSERT INTO t1 VALUES(2, 'two');
BEGIN;
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
DELETE FROM t1;
SELECT count(*) FROM t1;
DELETE FROM t1;
PRAGMA journal_mode = WAL;
CREATE TABLE ab(a PRIMARY KEY, b);
BEGIN;
INSERT INTO ab VALUES(1, 2);
BEGIN IMMEDIATE;
BEGIN IMMEDIATE;
BEGIN;
INSERT INTO ab VALUES(3, 4);
BEGIN IMMEDIATE;
BEGIN IMMEDIATE;
PRAGMA page_size = 1024;
PRAGMA journal_mode = wal;
CREATE TABLE t2(a, b);
PRAGMA wal_checkpoint = truncate;
INSERT INTO t1 VALUES(1, 2);
BEGIN;
INSERT INTO t2 VALUES(3, 4);
PRAGMA wal_checkpoint = passive;
SELECT * FROM t1;
SELECT * FROM t2;
PRAGMA journal_mode = wal;
INSERT INTO t1 VALUES(3, 4);
BEGIN EXCLUSIVE;
