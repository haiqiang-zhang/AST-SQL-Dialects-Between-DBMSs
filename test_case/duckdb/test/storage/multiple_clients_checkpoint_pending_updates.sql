CREATE TABLE test (i INTEGER);;
INSERT INTO test SELECT * FROM range(1000000);;
BEGIN TRANSACTION;;
UPDATE test SET i=i+1;;
CHECKPOINT;
FORCE CHECKPOINT;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
ROLLBACK;
DROP TABLE test;
CREATE TABLE test (i INTEGER);;
INSERT INTO test SELECT * FROM range(1000000);;
BEGIN TRANSACTION;
BEGIN TRANSACTION;
UPDATE test SET i=i+1 WHERE i < 1000;
BEGIN TRANSACTION;
UPDATE test SET i=i+1 WHERE i > 1000 AND i < 2000;
BEGIN TRANSACTION;
UPDATE test SET i=i+1 WHERE i > 2000 AND i < 3000;
BEGIN TRANSACTION;
UPDATE test SET i=i+1 WHERE i > 3000 AND i < 4000;
CHECKPOINT;
FORCE CHECKPOINT;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
ROLLBACK;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
ROLLBACK;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
ROLLBACK;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
ROLLBACK;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
SELECT MIN(i), MAX(i), COUNT(*) FROM test;;
