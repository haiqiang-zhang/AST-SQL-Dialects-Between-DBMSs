DROP TABLE IF EXISTS fx_1m;
DROP TABLE IF EXISTS fx_5m;
CREATE TABLE fx_1m (
    `symbol` LowCardinality(String) CODEC(ZSTD),
    `dt_close` DateTime64(3, 'UTC') CODEC(DoubleDelta, ZSTD),
    `open` Float32 CODEC(Delta, ZSTD),
    `high` Float32 CODEC(Delta, ZSTD),
    `low` Float32 CODEC(Delta, ZSTD),
    `close` Float32 CODEC(Delta, ZSTD),
    `volume` Float32 CODEC(Delta, ZSTD)
)
ENGINE = MergeTree()
PARTITION BY toYear(dt_close)
ORDER BY (symbol, dt_close) SETTINGS index_granularity = 8192, index_granularity_bytes = '10Mi';
