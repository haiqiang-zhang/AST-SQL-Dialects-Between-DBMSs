--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x <=> t2.x OR (t1.x IS NULL AND t2.x IS NULL)) ORDER BY t1.x NULLS LAST
--Result--
[(2, 2, 2, 2), (3, 3, 3, 33), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x <=> t2.x OR t1.x IS NULL AND t1.y <=> t2.y AND t2.x IS NULL) ORDER BY t1.x NULLS LAST
--Result--
[(1, 42, 4, 42), (2, 2, 2, 2), (3, 3, 3, 33), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x = t2.x OR t1.x IS NULL AND t2.x IS NULL) ORDER BY t1.x
--Result--
[(2, 2, 2, 2), (3, 3, 3, 33), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON t1.x <=> t2.x AND (t1.x = t1.y OR t1.x IS NULL AND t1.y IS NULL) ORDER BY t1.x
--Result--
[(2, 2, 2, 2), (3, 3, 3, 33), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x = t2.x OR t1.x IS NULL AND t2.x IS NULL) AND t1.y <=> t2.y ORDER BY t1.x NULLS LAST
--Result--
[(2, 2, 2, 2), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x <=> t2.x OR t1.y <=> t2.y OR (t1.x IS NULL AND t1.y IS NULL AND t2.x IS NULL AND t2.y IS NULL)) ORDER BY t1.x NULLS LAST
--Result--
[(1, 42, 4, 42), (2, 2, 2, 2), (3, 3, 3, 33), (None, None, None, None)]
+--------------------+
--Query--
SELECT * FROM t1 JOIN t2 ON (t1.x <=> t2.x OR (t1.x IS NULL AND t2.x IS NULL)) AND (t1.y == t2.y OR (t1.y IS NULL AND t2.y IS NULL)) AND COALESCE(t1.x, 0) != 2  ORDER BY t1.x NULLS LAST
--Result--
[(None, None, None, None)]
+--------------------+
--Query--
SELECT x = y OR (x IS NULL AND y IS NULL) FROM t1 ORDER BY x NULLS LAST
--Result--
[(0,), (1,), (1,), (1,)]
+--------------------+
