--Query--
SELECT bitmapToArray(bitmapBuild([1, 2, 3, 4, 5]))
--Result--
[([1, 2, 3, 4, 5],)]
+--------------------+
--Query--
SELECT bitmapCardinality(bitmapBuild([1, 2, 3, 4, 5]))
--Result--
[(5,)]
+--------------------+
--Query--
SELECT bitmapAndCardinality(bitmapBuild([1,2,3]),bitmapBuild([3,4,5]))
--Result--
[(1,)]
+--------------------+
--Query--
SELECT bitmapOrCardinality(bitmapBuild([1,2,3]),bitmapBuild([3,4,5]))
--Result--
[(5,)]
+--------------------+
--Query--
SELECT bitmapXorCardinality(bitmapBuild([1,2,3]),bitmapBuild([3,4,5]))
--Result--
[(4,)]
+--------------------+
--Query--
SELECT bitmapAndnotCardinality(bitmapBuild([1,2,3]),bitmapBuild([3,4,5]))
--Result--
[(2,)]
+--------------------+
--Query--
SELECT groupBitmap( uid ) AS user_num FROM bitmap_test
--Result--
[(70,)]
+--------------------+
--Query--
SELECT pickup_date, groupBitmap( uid ) AS user_num, bitmapToArray(groupBitmapState( uid )) AS users FROM bitmap_test GROUP BY pickup_date ORDER BY pickup_date
--Result--
[(datetime.date(2019, 1, 1), 50, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50]), (datetime.date(2019, 1, 2), 60, [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70]), (datetime.date(2019, 1, 3), 10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10])]
+--------------------+
--Query--
SELECT     bitmapCardinality(day_today) AS today_users,     bitmapCardinality(day_before) AS before_users,     bitmapOrCardinality(day_today, day_before) AS all_users,     bitmapAndCardinality(day_today, day_before) AS old_users,     bitmapAndnotCardinality(day_today, day_before) AS new_users,     bitmapXorCardinality(day_today, day_before) AS diff_users FROM (  SELECT city_id, groupBitmapState( uid ) AS day_today FROM bitmap_test WHERE pickup_date = '2019-01-02' GROUP BY city_id ORDER BY city_id ) js1 ALL LEFT JOIN (  SELECT city_id, groupBitmapState( uid ) AS day_before FROM bitmap_test WHERE pickup_date = '2019-01-01' GROUP BY city_id ORDER BY city_id ) js2 USING city_id
--Result--
[(60, 50, 70, 40, 20, 30)]
+--------------------+
--Query--
SELECT     bitmapCardinality(day_today) AS today_users,     bitmapCardinality(day_before) AS before_users,     bitmapCardinality(bitmapOr(day_today, day_before))ll_users,     bitmapCardinality(bitmapAnd(day_today, day_before)) AS old_users,     bitmapCardinality(bitmapAndnot(day_today, day_before)) AS new_users,     bitmapCardinality(bitmapXor(day_today, day_before)) AS diff_users FROM (  SELECT city_id, groupBitmapState( uid ) AS day_today FROM bitmap_test WHERE pickup_date = '2019-01-02' GROUP BY city_id ORDER BY city_id ) js1 ALL LEFT JOIN (  SELECT city_id, groupBitmapState( uid ) AS day_before FROM bitmap_test WHERE pickup_date = '2019-01-01' GROUP BY city_id ORDER BY city_id ) js2 USING city_id
--Result--
[(60, 50, 70, 40, 20, 30)]
+--------------------+
--Query--
SELECT count(*) FROM bitmap_test WHERE bitmapHasAny((SELECT groupBitmapState(uid) FROM bitmap_test WHERE pickup_date = '2019-01-01'), bitmapBuild([uid]))
--Result--
[(100,)]
+--------------------+
--Query--
SELECT pickup_date, groupBitmapMerge(uv) AS users from bitmap_state_test group by pickup_date order by pickup_date
--Result--
[(datetime.date(2019, 1, 1), 50), (datetime.date(2019, 1, 2), 60), (datetime.date(2019, 1, 3), 10)]
+--------------------+
--Query--
SELECT groupBitmapMerge(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%')
--Result--
[(15,)]
+--------------------+
--Query--
SELECT arraySort(bitmapToArray(groupBitmapMergeState(z))) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%')
--Result--
[([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],)]
+--------------------+
--Query--
SELECT groupBitmapOr(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%')
--Result--
[(15,)]
+--------------------+
--Query--
SELECT groupBitmapAnd(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%')
--Result--
[(3,)]
+--------------------+
--Query--
SELECT groupBitmapXor(z) FROM bitmap_column_expr_test2 WHERE like(tag_id, 'tag%')
--Result--
[(10,)]
+--------------------+
--Query--
SELECT bitmapHasAny(bitmapBuild([1, 2, 3, 5]), bitmapBuild(emptyArrayUInt8()))
--Result--
[(0,)]
+--------------------+
--Query--
SELECT bitmapHasAll(bitmapBuild([1, 2, 3, 5]), bitmapBuild(emptyArrayUInt8()))
--Result--
[(1,)]
+--------------------+
--Query--
SELECT bitmapContains(bitmapBuild(emptyArrayUInt32()), toUInt8(0))
--Result--
[(0,)]
+--------------------+
--Query--
SELECT bitmapMin(bitmapBuild(emptyArrayUInt8()))
--Result--
[(0,)]
+--------------------+
--Query--
SELECT bitmapMax(bitmapBuild(emptyArrayUInt8()))
--Result--
[(0,)]
+--------------------+
