--Query--
lock table t1 read
--Result--
[]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
lock table t1 write
--Result--
[]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
lock table t1 write
--Result--
[]
+--------------------+
--Query--
select * from t1
--Result--
[(1,)]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
lock table t1 write
--Result--
[]
+--------------------+
--Query--
select * from t1
--Result--
[(1,)]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
unlock tables
--Result--
[]
+--------------------+
--Query--
select * from t1
--Result--
[(1,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "FLUSH TABLES t1 FOR EXPORT"
--Result--
[(0,)]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "INSERT INTO t1 VALUES (2, 2)"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1
--Result--
[(1, 1)]
+--------------------+
--Query--
SELECT * FROM t1
--Result--
[(1, 1)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1
--Result--
[(1, 1)]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "ALTER TABLE t1 ADD INDEX i1(b)"
--Result--
[(0,)]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "FLUSH TABLE t1 FOR EXPORT"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "DROP TABLE t1"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "FLUSH TABLE t1 FOR EXPORT"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
LOCK TABLE t1 READ
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
LOCK TABLE t1 READ
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "FLUSH LOCAL TABLES t1 FOR EXPORT"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLE
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1 ORDER BY i
--Result--
[(100,), (200,)]
+--------------------+
--Query--
SELECT COUNT(*) = 1 FROM information_schema.processlist   WHERE state = "Waiting for table metadata lock" AND         info = "FLUSH NO_WRITE_TO_BINLOG TABLES test.t1 FOR EXPORT"
--Result--
[(0,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1 ORDER BY i
--Result--
[(100,), (200,)]
+--------------------+
--Query--
UNLOCK TABLE
--Result--
[]
+--------------------+
--Query--
SELECT * FROM t1 ORDER BY i
--Result--
[(100,), (200,), (300,)]
+--------------------+
--Query--
SELECT * FROM t1 ORDER BY i
--Result--
[(100,), (200,), (300,), (400,)]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
--Query--
UNLOCK TABLES
--Result--
[]
+--------------------+
