--Query--
SELECT * FROM t2 WHERE a=20 FOR UPDATE
--Result--
[(20,)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 FOR UPDATE OF t2
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 FOR SHARE OF t2
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE OF t1 NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE OF t1 SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 NOWAIT FOR SHARE OF t2 NOWAIT
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
--Query--
SELECT * FROM t2 WHERE a=20 FOR UPDATE
--Result--
[(20,)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR UPDATE SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 FOR UPDATE OF t2
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 FOR SHARE OF t2
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE OF t1 NOWAIT
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1 FOR SHARE OF t1 SKIP LOCKED
--Result--
[(1, 1), (2, 2), (3, 3)]
+--------------------+
--Query--
SELECT * FROM t1, t2 FOR SHARE OF t1 NOWAIT FOR SHARE OF t2 NOWAIT
--Result--
[(3, 3, 10), (2, 2, 10), (1, 1, 10), (3, 3, 20), (2, 2, 20), (1, 1, 20), (3, 3, 30), (2, 2, 30), (1, 1, 30)]
+--------------------+
