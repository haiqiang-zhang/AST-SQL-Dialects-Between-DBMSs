select @@sql_mode;
DROP TABLE IF EXISTS t1, t2;
CREATE TABLE t1 (col1 date);
INSERT INTO t1 VALUES('2004-01-01'),('2004-02-29');
INSERT INTO t1 VALUES('0000-10-31');
INSERT IGNORE INTO t1 VALUES('2004-0-29');
INSERT IGNORE INTO t1 VALUES('0000-00-00');
INSERT IGNORE INTO t1 VALUES('2004-02-29'),('2004-13-15'),('0000-00-00');
select * from t1;
drop table t1;
CREATE TABLE t1 (col1 date) engine=myisam;
INSERT INTO t1 VALUES ('2004-1-2'), ('2004-13-31'),('2004-1-3');
INSERT IGNORE INTO t1 VALUES('2004-13-31'),('2004-1-4');
INSERT ignore INTO t1 VALUES('2003-02-30');
INSERT ignore INTO t1 VALUES('2003-02-31');
select * from t1;
drop table t1;
CREATE TABLE t1 (col1 date) engine=innodb;
INSERT IGNORE INTO t1 VALUES('2004-13-31'),('2004-1-4');
INSERT ignore INTO t1 VALUES('2003-02-30');
INSERT ignore INTO t1 VALUES('2003-02-31');
select * from t1;
drop table t1;
CREATE TABLE t1 (col1 datetime);
INSERT INTO t1 VALUES('2004-10-31 15:30:00'),('2004-02-29 15:30:00');
INSERT INTO t1 VALUES('0000-10-31 15:30:00');
select * from t1;
drop table t1;
CREATE TABLE t1 (col1 timestamp);
INSERT INTO t1 VALUES('2004-10-31 15:30:00'),('2004-02-29 15:30:00');
INSERT IGNORE INTO t1 VALUES('0000-00-00 00:00:00');
INSERT IGNORE INTO t1 VALUES('0000-00-00 00:00:00');
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 date, col2 datetime, col3 timestamp);
INSERT INTO t1 (col1) VALUES (STR_TO_DATE('15.10.2004','%d.%m.%Y'));
INSERT INTO t1 (col2) VALUES (STR_TO_DATE('15.10.2004 10.15','%d.%m.%Y %H.%i'));
INSERT INTO t1 (col3) VALUES (STR_TO_DATE('15.10.2004 10.15','%d.%m.%Y %H.%i'));
drop table t1;
CREATE TABLE t1 (col1 date, col2 datetime, col3 timestamp);
INSERT INTO t1 (col1) VALUES (CAST('2004-10-15' AS DATE));
INSERT INTO t1 (col2) VALUES (CAST('2004-10-15 10:15' AS DATETIME));
INSERT INTO t1 (col3) VALUES (CAST('2004-10-15 10:15' AS DATETIME));
INSERT INTO t1 (col1) VALUES(CAST('0000-10-31' AS DATE));
INSERT INTO t1 (col2) VALUES(CAST('0000-10-31 15:30' AS DATETIME));
drop table t1;
CREATE TABLE t1 (col1 date, col2 datetime, col3 timestamp);
INSERT INTO t1 (col1) VALUES (CONVERT('2004-10-15',DATE));
INSERT INTO t1 (col2) VALUES (CONVERT('2004-10-15 10:15',DATETIME));
INSERT INTO t1 (col3) VALUES (CONVERT('2004-10-15 10:15',DATETIME));
INSERT INTO t1 (col1) VALUES(CONVERT('0000-10-31' , DATE));
INSERT INTO t1 (col2) VALUES(CONVERT('0000-10-31 15:30',DATETIME));
drop table t1;
CREATE TABLE t1(col1 TINYINT, col2 TINYINT UNSIGNED);
INSERT INTO t1 VALUES(-128,0),(0,0),(127,255),('-128','0'),('0','0'),('127','255'),(-128.0,0.0),(0.0,0.0),(127.0,255.0);
SELECT MOD(col1,0) FROM t1 WHERE col1 > 0 LIMIT 2;
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0,1/0);
INSERT IGNORE INTO t1 VALUES('-129','-1'),('128','256');
INSERT IGNORE INTO t1 VALUES(-129.0,-1.0),(128.0,256.0);
UPDATE IGNORE t1 SET col2=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1(col1 SMALLINT, col2 SMALLINT UNSIGNED);
INSERT INTO t1 VALUES(-32768,0),(0,0),(32767,65535),('-32768','0'),('32767','65535'),(-32768.0,0.0),(32767.0,65535.0);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0,1/0);
INSERT IGNORE INTO t1 VALUES(-32769,-1),(32768,65536);
INSERT IGNORE INTO t1 VALUES('-32769','-1'),('32768','65536');
INSERT IGNORE INTO t1 VALUES(-32769,-1.0),(32768.0,65536.0);
UPDATE IGNORE t1 SET col2=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 MEDIUMINT, col2 MEDIUMINT UNSIGNED);
INSERT INTO t1 VALUES(-8388608,0),(0,0),(8388607,16777215),('-8388608','0'),('8388607','16777215'),(-8388608.0,0.0),(8388607.0,16777215.0);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0,1/0);
INSERT IGNORE INTO t1 VALUES(-8388609,-1),(8388608,16777216);
INSERT IGNORE INTO t1 VALUES('-8388609','-1'),('8388608','16777216');
INSERT IGNORE INTO t1 VALUES(-8388609.0,-1.0),(8388608.0,16777216.0);
UPDATE IGNORE t1 SET col2=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 INT, col2 INT UNSIGNED);
INSERT INTO t1 VALUES(-2147483648,0),(0,0),(2147483647,4294967295),('-2147483648','0'),('2147483647','4294967295'),(-2147483648.0,0.0),(2147483647.0,4294967295.0);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0,1/0);
INSERT IGNORE INTO t1 values (-2147483649, -1),(2147643648,4294967296);
INSERT IGNORE INTO t1 values ('-2147483649', '-1'),('2147643648','4294967296');
INSERT IGNORE INTO t1 values (-2147483649.0, -1.0),(2147643648.0,4294967296.0);
UPDATE IGNORE t1 SET col2=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 BIGINT, col2 BIGINT UNSIGNED);
INSERT INTO t1 VALUES(-9223372036854775808,0),(0,0),(9223372036854775807,18446744073709551615);
INSERT INTO t1 VALUES('-9223372036854775808','0'),('9223372036854775807','18446744073709551615');
INSERT INTO t1 VALUES(-9223372036854774000.0,0.0),(9223372036854775700.0,1844674407370954000.0);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0,1/0);
INSERT IGNORE INTO t1 VALUES(-9223372036854775809,-1),(9223372036854775808,18446744073709551616);
INSERT IGNORE INTO t1 VALUES('-9223372036854775809','-1'),('9223372036854775808','18446744073709551616');
INSERT IGNORE INTO t1 VALUES(-9223372036854785809.0,-1.0),(9223372036854785808.0,18446744073709551616.0);
UPDATE IGNORE t1 SET col2=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 NUMERIC(4,2));
INSERT INTO t1 VALUES (10.55),(10.5555),(0),(-10.55),(-10.5555),(11),(1e+01);
INSERT INTO t1 VALUES ('10.55'),('10.5555'),('-10.55'),('-10.5555'),('11'),('1e+01');
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 values (1/0);
INSERT IGNORE INTO t1 VALUES(1000),(-1000);
INSERT IGNORE INTO t1 VALUES('1000'),('-1000');
INSERT IGNORE INTO t1 VALUES(1000.0),(-1000.0);
UPDATE IGNORE t1 SET col1=1/NULL where col1=0;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 FLOAT, col2 FLOAT UNSIGNED);
INSERT INTO t1 VALUES (-1.1E-37,0),(+3.4E+38,+3.4E+38);
INSERT INTO t1 VALUES ('-1.1E-37',0),('+3.4E+38','+3.4E+38');
INSERT INTO t1 (col1) VALUES (3E-46);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 (col1) VALUES (1/0);
INSERT IGNORE INTO t1 VALUES (+3.4E+39,-3.4E+39);
INSERT IGNORE INTO t1 VALUES ('+3.4E+39','-3.4E+39');
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 DOUBLE PRECISION, col2 DOUBLE PRECISION UNSIGNED);
INSERT INTO t1 VALUES (-2.2E-307,0),(2E-307,0),(+1.7E+308,+1.7E+308);
INSERT INTO t1 VALUES ('-2.2E-307',0),('-2E-307',0),('+1.7E+308','+1.7E+308');
INSERT INTO t1 (col1) VALUES (-2.2E-330);
INSERT IGNORE INTO t1 (col1) VALUES ('2a');
INSERT IGNORE INTO t1 (col1) values (1/0);
INSERT IGNORE INTO t1 VALUES ('+2.0E+309','-2.0E+309');
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 CHAR(5), col2 VARCHAR(6));
INSERT INTO t1 VALUES ('hello', 'hello'),('he', 'he'),('hello   ', 'hello ');
INSERT INTO t1 (col2) VALUES ('hello  ');
INSERT IGNORE INTO t1 VALUES ('hellobob', 'hellobob');
UPDATE IGNORE t1 SET col2 ='hellotrudy' WHERE col2 ='he';
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 enum('red','blue','green'));
INSERT INTO t1 VALUES ('red'),('blue'),('green');
INSERT IGNORE INTO t1 VALUES ('yellow');
UPDATE IGNORE t1 SET col1 ='yellow' WHERE col1 ='blue';
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 INT NOT NULL, col2 CHAR(5) NOT NULL, col3 DATE NOT NULL);
INSERT INTO t1 VALUES (100, 'hello', '2004-08-20');
INSERT INTO t1 (col1,col2,col3) VALUES (101, 'hell2', '2004-08-21');
INSERT IGNORE INTO t1 values (NULL,NULL,NULL);
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 INT NOT NULL default 99, col2 CHAR(6) NOT NULL);
INSERT INTO t1 VALUES (1, 'hello');
INSERT INTO t1 (col2) VALUES ('hello2');
INSERT IGNORE INTO t1 values (NULL,NULL);
INSERT IGNORE INTO t1 (col1) values (3);
INSERT IGNORE INTO t1 () values ();
SELECT * FROM t1;
DROP TABLE t1;
create table t1 (charcol char(255), varcharcol varchar(255),
binarycol binary(255), varbinarycol varbinary(255), tinytextcol tinytext,
tinyblobcol tinyblob);
select * from t1;
drop table t1;
create table t1 (col1 datetime);
insert into t1 values(STR_TO_DATE('31.10.2004 15.30','%d.%m.%Y %H.%i'));
insert into t1 values(STR_TO_DATE('2004.12.12 11:22:33 AM','%Y.%m.%d %r'));
insert into t1 values(STR_TO_DATE('2004.12.12 10:22:59','%Y.%m.%d %T'));
select * from t1;
select count(*) from t1 where STR_TO_DATE('2004.12.12 10:22:61','%Y.%m.%d %T') IS NULL;
drop table t1;
create table t1 (col1 char(3), col2 integer);
insert into t1 (col2) values (cast('10' as unsigned integer));
insert into t1 (col2) values (cast('10' as signed integer));
insert into t1 (col2) values (10E+0 + '0 ');
select * from t1;
drop table t1;
create table t1 (col1 date, col2 datetime, col3 timestamp);
drop table t1;
create table t1 (col1 date);
insert ignore into t1 values ('0000-00-00');
insert ignore into t1 values ('0000-00-00');
insert ignore into t1 (col1) values (cast('0000-00-00' as date));
select * from t1;
drop table t1;
create table t1 (col1 datetime);
insert ignore into t1 values ('0000-00-00 00:00:00'),
                             ('0000-00-00 00:00:00'),
                             (NULL);
select * from t1;
drop table t1;
create table t1 (col1 tinyint);
drop procedure if exists t1;
select * from t1;
drop table t1;
CREATE TABLE t1 (i int not null);
ALTER TABLE t1 ADD j int;
DROP TABLE t1;
CREATE TABLE t1 (i int not null);
ALTER TABLE t1 ADD j int;
DROP TABLE t1;
create table t1(a int, b date not null);
alter table t1 modify a bigint unsigned not null;
drop table t1;
create table t1 (d date);
insert into t1 values ('2000-10-01');
select * from t1;
drop table t1;
create table t1(a int, b timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);
alter table t1 add primary key(a);
drop table t1;
create table t1(a int, b timestamp not null default 20050102030405);
alter table t1 add primary key(a);
drop table t1;
create table t1(a bit(2));
select * from t1;
drop table t1;
create table t1 (date date not null);
create table t2 select date from t1;
drop table t2,t1;
select column_name, column_comment from information_schema.columns where
table_schema = 'test' and table_name = 't1';
create table t1 (i int)
comment '123456789*123456789*123456789*123456789*123456789*123456789*';
drop table t1;
create table t1(col1 tinyint, col2 tinyint unsigned, 
  col3 smallint, col4 smallint unsigned,
  col5 mediumint, col6 mediumint unsigned,
  col7 int, col8 int unsigned,
  col9 bigint, col10 bigint unsigned);
drop table t1;
create table t1(a year);
drop table t1;
create table t1(a datetime not null);
drop table t1;
SELECT
  STR_TO_DATE('2001','%Y'),
  CONCAT(STR_TO_DATE('2001','%Y')),
  STR_TO_DATE('2001','%Y')+1;
CREATE TABLE t1 (a DATE);
INSERT IGNORE INTO t1 VALUES('0000-00-00');
SELECT * FROM t1;
INSERT IGNORE INTO t1 VALUES('2004-0-30');
SELECT * FROM t1;
UPDATE IGNORE t1 SET a = '0000-00-00';
SELECT * FROM t1;
UPDATE IGNORE t1 SET a = '2004-0-30';
SELECT * FROM t1;
INSERT IGNORE INTO t1 SELECT * FROM t1;
SELECT * FROM t1;
CREATE TABLE t2 (b DATE) IGNORE SELECT a FROM t1;
SELECT * FROM t2;
DROP TABLE t2;
INSERT IGNORE INTO t1 VALUES(1/0);
SELECT * FROM t1;
UPDATE IGNORE t1 SET a = (1/0);
CREATE TABLE t2 (b DATE) IGNORE SELECT (1/0) FROM t1;
SELECT * FROM t2;
DROP TABLE t1,t2;
CREATE TABLE t1 (a1 INT, a2 DATETIME);
UPDATE t1 SET a2={d '1789-07-14'} WHERE a1=0;
DROP TABLE t1;
CREATE TABLE t1 (col1 char(3));
SELECT * FROM t1;
SELECT * FROM t1;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 (col1 bigint) engine=innodb;
INSERT INTO t1 values(-9223372036854775808);
SELECT * FROM t1;
INSERT INTO t1 VALUES(9223372036854775807);
SELECT * FROM t1;
CREATE TABLE t2 (col1 bigint unsigned);
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1( a INT);
CREATE TABLE t2( a INT, b INT);
INSERT INTO t1 VALUES (1), (2), (3), (4);
SELECT * FROM t2;
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (
   id TINYINT UNSIGNED NOT NULL DEFAULT 0
  ) ENGINE=MyISAM;
INSERT INTO t1 VALUES (18);
DROP TABLE t1;
CREATE TABLE t1(c1 varchar(50)) engine=InnoDB;
ALTER TABLE t1 ADD KEY in_c1(c1);
ALTER TABLE t1 ADD KEY in_c2(c1);
DROP TABLE t1;
CREATE TABLE t1 ( a datetime(2) );
CREATE TABLE t2 ( a timestamp(2) );
SELECT str_to_date('09:22', '%H:%i');
INSERT INTO t1 VALUES( str_to_date('09:22', '%H:%i') );
INSERT INTO t1 VALUES( str_to_date('09:22:23.33', '%H:%i:%s.%f') );
SELECT timediff( a, cast(CURRENT_DATE AS datetime) ) FROM t1;
DELETE FROM t1;
INSERT INTO t1 VALUES( str_to_date('2019-12-31', '%Y-%m-%d') );
SELECT * FROM t1;
INSERT INTO t2 VALUES( str_to_date('09:22', '%H:%i') );
INSERT INTO t2 VALUES( str_to_date('09:22:23.33', '%H:%i:%s.%f') );
DELETE FROM t2;
INSERT INTO t2 VALUES( str_to_date('2019-12-31', '%Y-%m-%d') );
CREATE TABLE t3 SELECT str_to_date('09:22:23.33', '%H:%i:%s.%f');
SELECT * FROM t2;
DROP TABLE t1, t2, t3;
