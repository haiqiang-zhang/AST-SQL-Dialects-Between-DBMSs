LOCK INSTANCE FOR BACKUP;
CREATE DATABASE testdb;
CREATE TABLESPACE testtablespace ADD DATAFILE 'ts.ibd' ENGINE=InnoDB;
CREATE TABLE testtable_1 (c1 int, c2 varchar(10));
CREATE VIEW testview_1 AS SELECT c2 FROM testtable_1;
CREATE INDEX testindex_1 ON testtable_1(c1);
CREATE EVENT testevent_1 ON SCHEDULE EVERY 10 SECOND DO SELECT 1;
INSERT INTO t1 VALUES(1),(2),(3);
CREATE TEMPORARY TABLE temptable_1 (tt1 int);
INSERT INTO temptable_1 SELECT * FROM t1;
SELECT * FROM temptable_1;
UNLOCK INSTANCE;
CREATE TABLE testtable_3 (c1 int, c2 varchar(10)) PARTITION BY RANGE (c1)(
   PARTITION p0 VALUES LESS THAN (10),
   PARTITION p2 VALUES LESS THAN (100),
   PARTITION p3 VALUES LESS THAN (1000));
INSERT testtable_3 VALUES (1,'a'),(11,'b'),(101,'c');
ALTER TABLE testtable_3 ADD PARTITION (PARTITION p4 VALUES LESS THAN (5000));
LOCK INSTANCE FOR BACKUP;
LOCK INSTANCE FOR BACKUP;
INSERT INTO testtable_1 VALUES(1,'aaa'),(2,'bbbbbb'),(3,'cccccccc');
INSERT INTO testtable_1 VALUES(4,'ddd'),(5,'eeeee'),(3,'fffffff');
UPDATE testtable_1 SET c1=11, c2='yyy' WHERE c1=1;
DELETE FROM testtable_1 WHERE c2 LIKE "aa";
INSERT testtable_3 VALUES (4999,'aa');
ALTER DATABASE testdb CHARACTER SET 'latin1';
ALTER TABLE testtable_1 ADD INDEX i2(c2);
ALTER VIEW testview_1 AS SELECT c1 FROM testtable_1;
ALTER EVENT testevent_1 ON SCHEDULE EVERY 100 SECOND DO SELECT 1;
ALTER TABLE testtable_1 ALGORITHM=INPLACE, ADD COLUMN c3 VARCHAR(255);
ALTER TABLE testtable_3 ADD PARTITION (PARTITION p5 VALUES LESS THAN (10000));
UNLOCK INSTANCE;
UNLOCK INSTANCE;
ALTER DATABASE testdb CHARACTER SET 'latin1';
ALTER VIEW testview_1 AS SELECT c1 FROM testtable_1;
ALTER EVENT testevent_1 ON SCHEDULE EVERY 100 SECOND DO SELECT 1;
INSERT testtable_3 VALUES (9999,'aa');
DROP DATABASE testdb;
DROP TABLE testtable_1;
DROP TABLE testtable_3;
DROP VIEW testview_1;
DROP TABLESPACE testtablespace;
DROP EVENT testevent_1;
LOCK INSTANCE FOR BACKUP;
CREATE TABLE t2 (c1 int);
DROP TABLE t1, t2;
