drop database if exists mysqltest;
drop view if exists v1,v2,v3;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
create table mysqltest.t2 (a int, b int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
create table mysqltest.t2 (a int, b int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int, primary key(a));
create table mysqltest.t2 (x int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int, primary key(a));
create table mysqltest.t2 (x int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int, primary key(a));
create table mysqltest.t2 (x int, y int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
create table mysqltest.t2 (a int, b int);
create table mysqltest.v3 (b int);
drop table mysqltest.v3;
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int);
drop database mysqltest;
create database mysqltest;
create table mysqltest.t1 (a int, b int);
drop database mysqltest;
create database mysqltest;
create table t1 (a int);
insert into t1 values (1);
create table t2 (s1 int);
drop table t1, t2;
drop database mysqltest;
create database mysqltest;
create table t1 (a int);
insert into t1 values (1);
create table t2 (s1 int);
drop table t1, t2;
drop database mysqltest;
create database mysqltest;
create table t1 (a int);
create table v1 (a int);
insert into t1 values (1);
drop table v1;
create algorithm=TEMPTABLE view v1 as select *, a as b from t1;
create algorithm=MERGE view v2 as select *, a as b from t1;
create algorithm=TEMPTABLE SQL SECURITY INVOKER view v3 as select *, a as b from t1;
create algorithm=MERGE SQL SECURITY INVOKER view v4 as select *, a as b from t1;
create view v5 as select * from v1;
select * from v1;
select * from v2;
select * from v3;
select * from v4;
select * from v5;
drop table t1;
drop database mysqltest;
create database mysqltest;
create table t1 (a int);
insert into t1 values (1);
select * from v1;
select * from v2;
select * from v3;
select * from v4;
select * from v5;
drop view v1, v2, v3, v4, v5;
drop table t1;
drop database mysqltest;
drop view if exists v1;
drop table if exists t1;
create view v1 as select 42;
select definer into @v1def1 from information_schema.views
  where table_schema = 'test' and table_name='v1';
drop view v1;
select definer into @v1def2 from information_schema.views
  where table_schema = 'test' and table_name='v1';
select @v1def1, @v1def2, @v1def1=@v1def2;
create database mysqltest;
CREATE TABLE t1 (i INT);
CREATE VIEW  v1 AS SELECT * FROM t1;
LOCK TABLES v1 READ;
UNLOCK TABLES;
drop database mysqltest;
drop view v1;
CREATE DATABASE mysqltest1;
CREATE TABLE mysqltest1.t1 (x INT);
DROP TABLE mysqltest1.t1;
DROP DATABASE mysqltest1;
INSERT INTO t1 VALUES (1), (2), (3);
DROP TABLE t1;
CREATE SCHEMA mysqltest_db1;
CREATE TABLE t1 (f1 INTEGER);
CREATE VIEW view1 AS
SELECT * FROM t1;
CREATE VIEW view2 AS
SELECT * FROM view1;
SELECT * FROM view2;
CREATE VIEW view3 AS
SELECT * FROM view2;
SELECT * from view3;
DROP SCHEMA mysqltest_db1;
CREATE DATABASE test1;
CREATE DATABASE test2;
CREATE TABLE test1.t0 (a VARCHAR(20));
CREATE TABLE test2.t1 (a VARCHAR(20));
DROP TABLE test2.t1, test1.t0;
DROP DATABASE test2;
DROP DATABASE test1;
DROP VIEW IF EXISTS v1;
DROP VIEW IF EXISTS v2;
DROP VIEW IF EXISTS v3;
DROP FUNCTION IF EXISTS f1;
DROP FUNCTION IF EXISTS f2;
DROP PROCEDURE IF EXISTS p1;
CREATE SQL SECURITY DEFINER VIEW v1 AS SELECT CURRENT_USER() AS cu;
CREATE PROCEDURE p1(OUT cu VARCHAR(77)) SQL SECURITY INVOKER
  SET cu= CURRENT_USER();
SELECT CURRENT_USER() = 'mysqltest_u1@localhost';
SELECT @cu = 'mysqltest_u1@localhost';
SELECT cu = 'root@localhost' FROM v1;
DROP PROCEDURE p1;
DROP VIEW v1;
CREATE DATABASE db17254;
INSERT INTO t1 VALUES (10),(20);
CREATE VIEW v1 AS SELECT * FROM t1;
SELECT * FROM v1;
SELECT * FROM v1;
DROP DATABASE db17254;
DROP DATABASE IF EXISTS mysqltest_db1;
DROP DATABASE IF EXISTS mysqltest_db2;
CREATE DATABASE mysqltest_db1;
CREATE DATABASE mysqltest_db2;
INSERT INTO t1 VALUES (1);
CREATE TABLE t2 (s CHAR(7));
INSERT INTO t2 VALUES ('public');
UPDATE t2 SET s = 'private' WHERE s = 'public';
DROP DATABASE mysqltest_db1;
DROP DATABASE mysqltest_db2;
CREATE DATABASE db26813;
CREATE VIEW v2 AS SELECT f1 FROM t1;
CREATE VIEW v3 AS SELECT f1 FROM t1;
DROP DATABASE db26813;
CREATE DATABASE mysqltest_29908;
ALTER VIEW v1 AS SELECT f1 FROM t1;
ALTER VIEW v2 AS SELECT f1 FROM t1;
DROP DATABASE mysqltest_29908;
DROP DATABASE IF EXISTS mysqltest1;
DROP DATABASE IF EXISTS mysqltest2;
CREATE DATABASE mysqltest1;
CREATE DATABASE mysqltest2;
CREATE TABLE mysqltest1.t1(c1 INT);
CREATE TABLE mysqltest1.t2(c2 INT);
CREATE TABLE mysqltest1.t3(c3 INT);
CREATE TABLE mysqltest1.t4(c4 INT);
SELECT * FROM v1;
INSERT INTO v2 VALUES(26);
DROP DATABASE mysqltest1;
DROP DATABASE mysqltest2;
CREATE DATABASE db1;
SELECT f1 FROM t1;
SELECT * FROM t1;
SELECT f1 FROM v1;
SELECT * FROM v1;
DROP DATABASE db1;
create database mysqltest1;
create table mysqltest1.t1 (i int);
create table mysqltest1.t2 (j int);
create table mysqltest1.t3 (k int, secret int);
select * from v1;
select * from v1;
select * from v1;
select * from v1;
select * from v2;
select * from v2;
select * from v3;
select * from v2;
select * from v2;
select * from v2;
select * from v2;
select * from v2;
select * from v2;
select * from v2;
select * from v2;
select * from v1;
drop database mysqltest1;
DROP VIEW IF EXISTS v1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (i INT);
CREATE VIEW v1 AS SELECT * FROM t1;
ALTER VIEW v1 AS SELECT * FROM t1;
ALTER ALGORITHM=MERGE VIEW v1 AS SELECT * FROM t1;
DROP VIEW v1;
DROP TABLE t1;
CREATE DATABASE mysqltest1;
CREATE TABLE t1 ( a INT );
INSERT INTO t1 VALUES (1), (2);
INSERT INTO t2 VALUES (1), (2);
DROP TABLE t1, t2;
DROP DATABASE mysqltest1;
CREATE DATABASE mysqltest1;
CREATE TABLE t1 ( a INT, b INT );
CREATE TABLE t2 ( a INT, b INT );
CREATE VIEW v1 AS SELECT a, b FROM t1;
DROP TABLE t1, t2;
DROP VIEW v1;
DROP DATABASE mysqltest1;
CREATE DATABASE mysqltest1;
CREATE VIEW v1 AS SELECT * FROM information_schema.tables LIMIT 1;
DROP VIEW v1, v2;
DROP DATABASE mysqltest1;
CREATE DATABASE mysqltest1;
CREATE DATABASE mysqltest2;
CREATE TABLE t1( a INT );
CREATE TABLE t2( a INT, b INT );
CREATE VIEW v1 AS SELECT 1 AS a;
CREATE VIEW v2 AS SELECT 1 AS a, 2 AS b;
CREATE VIEW v_t1 AS SELECT * FROM t1;
CREATE VIEW v_t2 AS SELECT * FROM t2;
CREATE VIEW v_v1 AS SELECT * FROM v1;
CREATE VIEW v_v2 AS SELECT * FROM v2;
DROP TABLE t1;
DROP VIEW v1;
DROP DATABASE mysqltest1;
DROP DATABASE mysqltest2;
CREATE TABLE t1( a INT );
DROP TABLE t1;
CREATE DATABASE mysqltest1;
CREATE TABLE t1 (a INT);
CREATE SQL SECURITY INVOKER VIEW v1 AS SELECT a FROM t1 GROUP BY a;
SELECT a FROM v1;
SELECT a FROM v2;
DROP DATABASE mysqltest1;
LOCK TABLES v1 READ;
PREPARE stmt FROM 'SELECT * FROM v1';
DROP PREPARE stmt;
SELECT DEFINER FROM information_schema.VIEWS WHERE TABLE_NAME='silly_view';
