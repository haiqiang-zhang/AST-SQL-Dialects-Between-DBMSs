drop table if exists t0,t1,t2,t3,t4;
drop table if exists t0,t5,t6,t7,t8,t9,t1_1,t1_2,t9_1,t9_2;
create table t0 SELECT 1,"table 1";
create table t2 SELECT 2,"table 2";
create table t3 SELECT 3,"table 3";
select * from t2;
select * from t3;
drop table if exists t1,t2,t3,t4;
CREATE TABLE t1 (a int);
CREATE TABLE t3 (a int);
UNLOCK TABLES;
create view v1 as select * from t1;
drop view v1;
drop table t1;
create table t1(f1 int) engine=innodb;
drop table t1;
CREATE TABLE t1 (i INT);
CREATE TABLE t2 (j INT);
LOCK TABLES t1 READ;
UNLOCK TABLES;
LOCK TABLE t1 WRITE;
UNLOCK TABLES;
LOCK TABLES t0 WRITE;
UNLOCK TABLES;
LOCK TABLES t1 READ, t0 WRITE;
UNLOCK TABLES;
LOCK TABLES t1 WRITE, t0 WRITE;
UNLOCK TABLES;
DROP TABLES t1, t3;
UNLOCK TABLES;
SELECT * FROM t2;
UNLOCK TABLES;
UNLOCK TABLES;
SELECT * FROM t2;
SELECT * FROM t2;
SELECT * FROM t0;
UNLOCK TABLES;
LOCK TABLE t2 WRITE;
SELECT * FROM t2;
SELECT * FROM t2;
UNLOCK TABLES;
CREATE TABLE t6(k INT);
SELECT * FROM t2;
SELECT * FROM t6;
SELECT * FROM t2;
SELECT * FROM t6;
UNLOCK TABLES;
CREATE TABLE t1 (i INT) ENGINE=InnoDB;
CREATE TABLE t3 (k INT) ENGINE=InnoDB;
CREATE TABLE t4 (l INT) ENGINE=InnoDB;
LOCK TABLES t1 WRITE, t2 WRITE, t3 WRITE;
SELECT * FROM t1;
SELECT * FROM t2;
SELECT * FROM t3;
SELECT * FROM t1;
SELECT * FROM t2;
SELECT * FROM t3;
UNLOCK TABLES;
DROP TABLES t1, t2, t3, t4;
CREATE TABLE t1 (i INT);
CREATE TABLE t2 (j INT);
CREATE VIEW v1 AS SELECT * FROM t1;
CREATE VIEW v2 AS SELECT * FROM t2;
LOCK TABLES t1 WRITE;
UNLOCK TABLES;
LOCK TABLES v1 READ;
UNLOCK TABLES;
LOCK TABLES v1 WRITE;
SELECT * FROM v1;
SELECT * FROM v1;
UNLOCK TABLES;
SELECT * FROM v2;
SELECT * FROM v2;
UNLOCK TABLES;
DROP VIEW v2;
DROP TABLES t1, t2;
CREATE TABLE t1 (pk INT PRIMARY KEY);
INSERT INTO t1 VALUES (1);
CREATE TABLE t2 (fk INT, FOREIGN KEY (fk) REFERENCES t1 (pk));
INSERT INTO t2 VALUES (1);
CREATE TABLE t3 (fk INT);
CREATE TABLE t4 (pk INT NOT NULL, UNIQUE(pk));
INSERT INTO t4 VALUES (2);
LOCK TABLES t1 WRITE, t2 WRITE, t3 WRITE, t4 WRITE;
INSERT INTO t3 VALUES (2);
SELECT unique_constraint_name FROM information_schema.referential_constraints WHERE table_name = 't3';
UNLOCK TABLES;
DROP TABLES t1, t2, t4;
CREATE TABLE t1 (pk INT NOT NULL, UNIQUE(pk));
INSERT INTO t1 VALUES (1), (2);
LOCK TABLES t1 WRITE, t3 WRITE;
INSERT INTO t3 VALUES (2);
INSERT INTO t3 VALUES (3);
SELECT unique_constraint_name FROM information_schema.referential_constraints WHERE table_name = 't3';
UNLOCK TABLES;
