--Query--
SELECT * FROM mvtest_tv ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 11.0)]
+--------------------+
--Query--
EXPLAIN (costs off)   CREATE MATERIALIZED VIEW mvtest_tm AS SELECT type, sum(amt) AS totamt FROM mvtest_t GROUP BY type WITH NO DATA
--Result--
[('HashAggregate',), ('  Group Key: type',), ('  ->  Seq Scan on mvtest_t',)]
+--------------------+
--Query--
SELECT relispopulated FROM pg_class WHERE oid = 'mvtest_tm'::regclass
--Result--
[(False,)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_tm
--Result--
[]
+--------------------+
--Query--
SELECT relispopulated FROM pg_class WHERE oid = 'mvtest_tm'::regclass
--Result--
[(True,)]
+--------------------+
--Query--
SELECT * FROM mvtest_tm ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 11.0)]
+--------------------+
--Query--
EXPLAIN (costs off)   CREATE MATERIALIZED VIEW mvtest_tvm AS SELECT * FROM mvtest_tv ORDER BY type
--Result--
[('Sort',), ('  Sort Key: mvtest_t.type',), ('  ->  HashAggregate',), ('        Group Key: mvtest_t.type',), ('        ->  Seq Scan on mvtest_t',)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvm
--Result--
[('x', 5.0), ('y', 12.0), ('z', 11.0)]
+--------------------+
--Query--
EXPLAIN (costs off)   CREATE MATERIALIZED VIEW mvtest_tvvm AS SELECT * FROM mvtest_tvv
--Result--
[('Aggregate',), ('  ->  HashAggregate',), ('        Group Key: mvtest_t.type',), ('        ->  Seq Scan on mvtest_t',)]
+--------------------+
--Query--
SELECT * FROM mvtest_tm ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 11.0)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvm ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 11.0)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW CONCURRENTLY mvtest_tm
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_tvm
--Result--
[]
+--------------------+
--Query--
SELECT * FROM mvtest_tm ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 24.0)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvm ORDER BY type
--Result--
[('x', 5.0), ('y', 12.0), ('z', 24.0)]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tmm
--Result--
[('Seq Scan on mvtest_tmm',)]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tvmm
--Result--
[('Seq Scan on mvtest_tvmm',)]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tvvm
--Result--
[('Seq Scan on mvtest_tvvm',)]
+--------------------+
--Query--
SELECT * FROM mvtest_tmm
--Result--
[(28.0,)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvmm
--Result--
[(28.0,)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvvm
--Result--
[(28.0,)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_tmm
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_tvmm
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_tvvm
--Result--
[]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tmm
--Result--
[('Seq Scan on mvtest_tmm',)]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tvmm
--Result--
[('Seq Scan on mvtest_tvmm',)]
+--------------------+
--Query--
EXPLAIN (costs off)   SELECT * FROM mvtest_tvvm
--Result--
[('Seq Scan on mvtest_tvvm',)]
+--------------------+
--Query--
SELECT * FROM mvtest_tmm
--Result--
[(41.0,)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvmm
--Result--
[(41.0,)]
+--------------------+
--Query--
SELECT * FROM mvtest_tvvm
--Result--
[(41.0,)]
+--------------------+
--Query--
SELECT type, m.totamt AS mtot, v.totamt AS vtot FROM mvtest_tm m LEFT JOIN mvtest_tv v USING (type) ORDER BY type
--Result--
[('x', 5.0, 5.0), ('y', 12.0, 12.0), ('z', 24.0, 24.0)]
+--------------------+
--Query--
SELECT relispopulated FROM pg_class WHERE oid = 'mv_test3'::regclass
--Result--
[(True,)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_mv
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW CONCURRENTLY mvtest_mv
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW CONCURRENTLY mvtest_boxmv
--Result--
[]
+--------------------+
--Query--
SELECT * FROM mvtest_boxmv ORDER BY id
--Result--
[(1, '(32,32),(31,31)'), (2, '(2,2),(1,1)'), (3, '(1.9999996,1.9999996),(1,1)')]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_mv_v
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW CONCURRENTLY mvtest_mv_v
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_mv_v_2
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_mv_v_3
--Result--
[]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW mvtest_mv_v_4
--Result--
[]
+--------------------+
--Query--
SELECT * FROM mvtest_v
--Result--
[(1, 3)]
+--------------------+
--Query--
SELECT * FROM mvtest_mv_v
--Result--
[(1, 3)]
+--------------------+
--Query--
SELECT * FROM mvtest_mv_v_2
--Result--
[(1, 3)]
+--------------------+
--Query--
SELECT * FROM mvtest_mv_v_3
--Result--
[(1, 3)]
+--------------------+
--Query--
SELECT * FROM mvtest_mv_v_4
--Result--
[(1, 3)]
+--------------------+
--Query--
SELECT * FROM mv_unspecified_types
--Result--
[(42, 42.5, 'foo', 'foo', None)]
+--------------------+
--Query--
SELECT * FROM mvtest_v
--Result--
[(6,), (7,), (8,), (9,), (10,)]
+--------------------+
--Query--
SELECT * FROM mvtest_mv_v
--Result--
[(1,), (2,), (3,), (4,), (5,)]
+--------------------+
--Query--
SELECT mvtest_func()
--Result--
[('',)]
+--------------------+
--Query--
SELECT * FROM mvtest1
--Result--
[(1,)]
+--------------------+
--Query--
GRANT ALL ON SCHEMA matview_schema TO public
--Result--
[]
+--------------------+
--Query--
EXPLAIN (ANALYZE, COSTS OFF, SUMMARY OFF, TIMING OFF)   CREATE MATERIALIZED VIEW matview_schema.mv_withdata2 (a) AS   SELECT generate_series(1, 10) WITH DATA
--Result--
[('ProjectSet (actual rows=10 loops=1)',), ('  ->  Result (actual rows=1 loops=1)',)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW matview_schema.mv_withdata2
--Result--
[]
+--------------------+
--Query--
EXPLAIN (ANALYZE, COSTS OFF, SUMMARY OFF, TIMING OFF)   CREATE MATERIALIZED VIEW matview_schema.mv_nodata2 (a) AS   SELECT generate_series(1, 10) WITH NO DATA
--Result--
[('ProjectSet (never executed)',), ('  ->  Result (never executed)',)]
+--------------------+
--Query--
REFRESH MATERIALIZED VIEW matview_schema.mv_nodata2
--Result--
[]
+--------------------+
--Query--
EXPLAIN (ANALYZE, COSTS OFF, SUMMARY OFF, TIMING OFF)   CREATE MATERIALIZED VIEW IF NOT EXISTS matview_ine_tab AS     SELECT 1 / 0
--Result--
[]
+--------------------+
--Query--
EXPLAIN (ANALYZE, COSTS OFF, SUMMARY OFF, TIMING OFF)   CREATE MATERIALIZED VIEW IF NOT EXISTS matview_ine_tab AS     SELECT 1 / 0 WITH NO DATA
--Result--
[]
+--------------------+
