--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 2), (2, 3), (3, 4), (None, 1)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(2, 3), (3, 4), (None, 1)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(3, 4), (None, 1), (1, 3)]
+--------------------+
--Query--
COMMENT ON CONSTRAINT constrname ON FKTABLE IS 'fk constraint comment'
--Result--
[]
+--------------------+
--Query--
COMMENT ON CONSTRAINT constrname ON FKTABLE IS NULL
--Result--
[]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 2, 4), (1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0), (None, None, 4)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0), (None, None, 4)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (3, 6, 12), (None, None, 0), (None, None, 4), (None, None, 8)]
+--------------------+
--Query--
SELECT * FROM PKTABLE
--Result--
[(1, 3, 'Test1-2'), (3, 6, 'Test3'), (4, 8, 'Test4'), (1, 4, 'Test2')]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(3, 6, 12), (None, None, 0), (None, None, 4), (None, None, 8), (1, 3, 5)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 2, 4), (1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0), (-1, -2, 4)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (2, 4, 8), (3, 6, 12), (None, None, 0), (-1, -2, 4)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 3, 5), (3, 6, 12), (None, None, 0), (-1, -2, 4), (-1, -2, 8)]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 2), (2, 3), (3, 4), (None, 1)]
+--------------------+
--Query--
SELECT * FROM PKTABLE
--Result--
[(1, 'Test1'), (2, 'Test2'), (3, 'Test3'), (4, 'Test4'), (5, 'Test5')]
+--------------------+
--Query--
SELECT * FROM PKTABLE
--Result--
[(1, 'Test1'), (2, 'Test2'), (3, 'Test3'), (4, 'Test4')]
+--------------------+
--Query--
SELECT * FROM PKTABLE
--Result--
[(1, 'Test1'), (2, 'Test2'), (3, 'Test3'), (0, 'Test4')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(1, 2, 3, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(1, 2, 3, 'test1'), (1, 3, 3, 'test2'), (1, 3, 4, 'test3')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(1, 2, 3, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * FROM PKTABLE
--Result--
[(1, 2, 3, 'test1'), (1, 3, None, 'test2')]
+--------------------+
--Query--
SELECT * FROM FKTABLE
--Result--
[(1, 2, 3, 1)]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(1, 2, 3, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 4, 5, 'test4'), (1, 5, 3, 'test1'), (1, 3, 3, 'test2'), (1, 3, 4, 'test3')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (1, 5, 3, 1)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 4, 5, 'test4'), (1, 3, 3, 'test2'), (1, 3, 4, 'test3')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(1, 3, 3, 'test2'), (1, 3, 4, 'test3')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(1, 2, 3, 1), (2, 3, 4, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 3, 4, 'test3'), (2, 4, 5, 'test4'), (1, 5, 3, 'test1'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(2, 3, 4, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (None, None, None, 1)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 4, 5, 'test4'), (1, 5, 3, 'test1'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (None, None, None, 1), (0, None, None, 1)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 4, 5, 'test4'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (None, None, None, 1), (0, None, None, 1)]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(1, 2, 3, 1), (2, 3, 4, 1), (2, 4, 5, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, 3, 4, 'test3'), (2, -1, 5, 'test5'), (0, -1, -2, 'test1'), (2, 10, 5, 'test4'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(2, 3, 4, 1), (None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (0, -1, -2, 1), (0, -1, -2, 1)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(2, -1, 5, 'test5'), (0, -1, -2, 'test1'), (2, 10, 5, 'test4'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (0, -1, -2, 1), (0, -1, -2, 1), (None, None, None, 1)]
+--------------------+
--Query--
SELECT * from PKTABLE
--Result--
[(0, -1, -2, 'test1'), (2, 10, 5, 'test4'), (1, 2, 3, 'test2')]
+--------------------+
--Query--
SELECT * from FKTABLE
--Result--
[(None, 2, 3, 2), (2, None, 3, 3), (None, 2, 7, 4), (None, 3, 4, 5), (0, -1, -2, 1), (0, -1, -2, 1), (None, None, None, 1)]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid) FROM pg_constraint WHERE conrelid = 'fktable'::regclass::oid ORDER BY oid
--Result--
[('FOREIGN KEY (tid, fk_id_del_set_null) REFERENCES pktable(tid, id) ON DELETE SET NULL (fk_id_del_set_null)',), ('FOREIGN KEY (tid, fk_id_del_set_default) REFERENCES pktable(tid, id) ON DELETE SET DEFAULT (fk_id_del_set_default)',)]
+--------------------+
--Query--
SELECT * FROM FKTABLE ORDER BY id
--Result--
[(1, 1, None, None), (1, 2, None, 0)]
+--------------------+
--Query--
select a, b from selfref
--Result--
[(1, 1), (123, 123)]
+--------------------+
--Query--
select a, b from selfref
--Result--
[(1, 1), (456, 456)]
+--------------------+
--Query--
select * from defc
--Result--
[(2,)]
+--------------------+
--Query--
select * from defc
--Result--
[(0,)]
+--------------------+
--Query--
select * from defc
--Result--
[(1,)]
+--------------------+
--Query--
explain (costs off) delete from t1 where a = 1
--Result--
[('Delete on t2',), ('  ->  Nested Loop',), ('        ->  Index Scan using t1_pkey on t1',), ('              Index Cond: (a = 1)',), ('        ->  Seq Scan on t2',), ('              Filter: (b = 1)',), ('',), ('Delete on t1',), ('  ->  Index Scan using t1_pkey on t1',), ('        Index Cond: (a = 1)',)]
+--------------------+
--Query--
select conname from pg_constraint where conrelid = 'fktable2'::regclass order by conname
--Result--
[('fktable2_a_very_very_long_column_name_to_exceed_63_charac_fkey1',), ('fktable2_a_very_very_long_column_name_to_exceed_63_charact_fkey',), ('fktable2_very_very_long_column_name_to_exceed_63_character_fkey',)]
+--------------------+
--Query--
savepoint x
--Result--
[]
+--------------------+
--Query--
SELECT cr.relname, co.conname, co.contype, co.convalidated,        p.conname AS conparent, p.convalidated, cf.relname AS foreignrel FROM pg_constraint co JOIN pg_class cr ON cr.oid = co.conrelid LEFT JOIN pg_class cf ON cf.oid = co.confrelid LEFT JOIN pg_constraint p ON p.oid = co.conparentid WHERE cr.oid IN (SELECT relid FROM pg_partition_tree('parted_self_fk')) ORDER BY co.contype, cr.relname, co.conname, p.conname
--Result--
[('part1_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part2_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part32_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part33_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part3_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('parted_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, None, None, 'parted_self_fk'), ('part1_self_fk', 'part1_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('part2_self_fk', 'part2_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('part32_self_fk', 'part32_self_fk_pkey', 'p', True, 'part3_self_fk_pkey', True, None), ('part33_self_fk', 'part33_self_fk_pkey', 'p', True, 'part3_self_fk_pkey', True, None), ('part3_self_fk', 'part3_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('parted_self_fk', 'parted_self_fk_pkey', 'p', True, None, None, None)]
+--------------------+
--Query--
SELECT cr.relname, co.conname, co.contype, co.convalidated,        p.conname AS conparent, p.convalidated, cf.relname AS foreignrel FROM pg_constraint co JOIN pg_class cr ON cr.oid = co.conrelid LEFT JOIN pg_class cf ON cf.oid = co.confrelid LEFT JOIN pg_constraint p ON p.oid = co.conparentid WHERE cr.oid IN (SELECT relid FROM pg_partition_tree('parted_self_fk')) ORDER BY co.contype, cr.relname, co.conname, p.conname
--Result--
[('part1_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part2_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part32_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part33_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('part3_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, 'parted_self_fk_id_abc_fkey', True, 'parted_self_fk'), ('parted_self_fk', 'parted_self_fk_id_abc_fkey', 'f', True, None, None, 'parted_self_fk'), ('part1_self_fk', 'part1_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('part2_self_fk', 'part2_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('part32_self_fk', 'part32_self_fk_pkey', 'p', True, 'part3_self_fk_pkey', True, None), ('part33_self_fk', 'part33_self_fk_pkey', 'p', True, 'part3_self_fk_pkey', True, None), ('part3_self_fk', 'part3_self_fk_pkey', 'p', True, 'parted_self_fk_pkey', True, None), ('parted_self_fk', 'parted_self_fk_pkey', 'p', True, None, None, None)]
+--------------------+
--Query--
SELECT pg_describe_object('pg_constraint'::regclass, oid, 0), confrelid::regclass,        CASE WHEN conparentid <> 0 THEN pg_describe_object('pg_constraint'::regclass, conparentid, 0) ELSE 'TOP' END FROM pg_catalog.pg_constraint WHERE conrelid IN (SELECT relid FROM pg_partition_tree('fk')) ORDER BY conrelid::regclass::text, conname
--Result--
[('constraint fk_a_fkey on table fk', 'pk', 'TOP'), ('constraint fk_a_fkey1 on table fk', 'pk1', 'constraint fk_a_fkey on table fk'), ('constraint fk_a_fkey2 on table fk', 'pk11', 'constraint fk_a_fkey1 on table fk'), ('constraint fk_a_fkey3 on table fk', 'pk2', 'constraint fk_a_fkey on table fk'), ('constraint fk_a_fkey4 on table fk', 'pk3', 'constraint fk_a_fkey on table fk'), ('constraint fk_a_fkey5 on table fk', 'pk31', 'constraint fk_a_fkey4 on table fk'), ('constraint fk_a_fkey6 on table fk', 'pk32', 'constraint fk_a_fkey4 on table fk'), ('constraint fk_a_fkey on table fk1', 'pk', 'constraint fk_a_fkey on table fk'), ('constraint fk_a_fkey on table fk11', 'pk', 'constraint fk_a_fkey on table fk1'), ('constraint fk_a_fkey on table fk2', 'pk', 'constraint fk_a_fkey on table fk'), ('constraint fk_a_fkey on table fk3', 'pk', 'constraint fk_a_fkey on table fk')]
+--------------------+
--Query--
ABORT
--Result--
[]
+--------------------+
--Query--
ABORT
--Result--
[]
+--------------------+
--Query--
ABORT
--Result--
[]
+--------------------+
--Query--
ABORT
--Result--
[]
+--------------------+
--Query--
SELECT tableoid::regclass, * FROM fk
--Result--
[('fk12', 20)]
+--------------------+
--Query--
SELECT tableoid::regclass, * FROM fk
--Result--
[]
+--------------------+
--Query--
TRUNCATE TABLE pk
--Result--
[]
+--------------------+
--Query--
SELECT tableoid::regclass, * FROM fk
--Result--
[('fk_d', None), ('fk_d', None)]
+--------------------+
--Query--
TRUNCATE TABLE pk
--Result--
[]
+--------------------+
--Query--
SELECT tableoid::regclass, * FROM fk
--Result--
[('fk12', 1, 50), ('fk12', 2, 50)]
+--------------------+
--Query--
TRUNCATE TABLE pk
--Result--
[]
+--------------------+
--Query--
SELECT tableoid::regclass, * FROM fk
--Result--
[('fk12', 20), ('fk12', 30)]
+--------------------+
--Query--
SELECT * FROM fkpart9.pk
--Result--
[]
+--------------------+
--Query--
SELECT * FROM fkpart9.fk
--Result--
[]
+--------------------+
