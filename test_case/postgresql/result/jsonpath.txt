--Query--
select '$'::jsonpath
--Result--
[('$',)]
+--------------------+
--Query--
select 'strict $'::jsonpath
--Result--
[('strict $',)]
+--------------------+
--Query--
select 'lax $'::jsonpath
--Result--
[('$',)]
+--------------------+
--Query--
select '$.a'::jsonpath
--Result--
[('$."a"',)]
+--------------------+
--Query--
select '$.a.v'::jsonpath
--Result--
[('$."a"."v"',)]
+--------------------+
--Query--
select '$.a.*'::jsonpath
--Result--
[('$."a".*',)]
+--------------------+
--Query--
select '$.*[*]'::jsonpath
--Result--
[('$.*[*]',)]
+--------------------+
--Query--
select '$.a[*]'::jsonpath
--Result--
[('$."a"[*]',)]
+--------------------+
--Query--
select '$.a[*][*]'::jsonpath
--Result--
[('$."a"[*][*]',)]
+--------------------+
--Query--
select '$[*]'::jsonpath
--Result--
[('$[*]',)]
+--------------------+
--Query--
select '$[0]'::jsonpath
--Result--
[('$[0]',)]
+--------------------+
--Query--
select '$[*][0]'::jsonpath
--Result--
[('$[*][0]',)]
+--------------------+
--Query--
select '$[*].a'::jsonpath
--Result--
[('$[*]."a"',)]
+--------------------+
--Query--
select '$[*][0].a.b'::jsonpath
--Result--
[('$[*][0]."a"."b"',)]
+--------------------+
--Query--
select '$.a.**.b'::jsonpath
--Result--
[('$."a".**."b"',)]
+--------------------+
--Query--
select '$.a.**{2}.b'::jsonpath
--Result--
[('$."a".**{2}."b"',)]
+--------------------+
--Query--
select '$.a.**{2 to 2}.b'::jsonpath
--Result--
[('$."a".**{2}."b"',)]
+--------------------+
--Query--
select '$.a.**{2 to 5}.b'::jsonpath
--Result--
[('$."a".**{2 to 5}."b"',)]
+--------------------+
--Query--
select '$.a.**{0 to 5}.b'::jsonpath
--Result--
[('$."a".**{0 to 5}."b"',)]
+--------------------+
--Query--
select '$.a.**{5 to last}.b'::jsonpath
--Result--
[('$."a".**{5 to last}."b"',)]
+--------------------+
--Query--
select '$.a.**{last}.b'::jsonpath
--Result--
[('$."a".**{last}."b"',)]
+--------------------+
--Query--
select '$.a.**{last to 5}.b'::jsonpath
--Result--
[('$."a".**{last to 5}."b"',)]
+--------------------+
--Query--
select '$+1'::jsonpath
--Result--
[('($ + 1)',)]
+--------------------+
--Query--
select '$-1'::jsonpath
--Result--
[('($ - 1)',)]
+--------------------+
--Query--
select '1 * 2 + 4 % -3 != false'::jsonpath
--Result--
[('(1 * 2 + 4 % -3 != false)',)]
+--------------------+
--Query--
select '"\b\f\r\n\t\v\"\''\\"'::jsonpath
--Result--
[('"\\b\\f\\r\\n\\t\\u000b\\"\'\\\\"',)]
+--------------------+
--Query--
select '"\x50\u0067\u{53}\u{051}\u{00004C}"'::jsonpath
--Result--
[('"PgSQL"',)]
+--------------------+
--Query--
select '$.foo\x50\u0067\u{53}\u{051}\u{00004C}\t\"bar'::jsonpath
--Result--
[('$."fooPgSQL\\t\\"bar"',)]
+--------------------+
--Query--
select '"\z"'::jsonpath
--Result--
[('"z"',)]
+--------------------+
--Query--
select '$.g ? ($.a == 1)'::jsonpath
--Result--
[('$."g"?($."a" == 1)',)]
+--------------------+
--Query--
select '$.g ? (@ == 1)'::jsonpath
--Result--
[('$."g"?(@ == 1)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1)'::jsonpath
--Result--
[('$."g"?(@."a" == 1)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1 || @.a == 4)'::jsonpath
--Result--
[('$."g"?(@."a" == 1 || @."a" == 4)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1 && @.a == 4)'::jsonpath
--Result--
[('$."g"?(@."a" == 1 && @."a" == 4)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1 || @.a == 4 && @.b == 7)'::jsonpath
--Result--
[('$."g"?(@."a" == 1 || @."a" == 4 && @."b" == 7)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1 || !(@.a == 4) && @.b == 7)'::jsonpath
--Result--
[('$."g"?(@."a" == 1 || !(@."a" == 4) && @."b" == 7)',)]
+--------------------+
--Query--
select '$.g ? (@.a == 1 || !(@.x >= 123 || @.a == 4) && @.b == 7)'::jsonpath
--Result--
[('$."g"?(@."a" == 1 || !(@."x" >= 123 || @."a" == 4) && @."b" == 7)',)]
+--------------------+
--Query--
select '$.g ? (@.x >= @[*]?(@.a > "abc"))'::jsonpath
--Result--
[('$."g"?(@."x" >= @[*]?(@."a" > "abc"))',)]
+--------------------+
--Query--
select '$.g ? ((@.x >= 123 || @.a == 4) is unknown)'::jsonpath
--Result--
[('$."g"?((@."x" >= 123 || @."a" == 4) is unknown)',)]
+--------------------+
--Query--
select '$.g ? (exists (@.x))'::jsonpath
--Result--
[('$."g"?(exists (@."x"))',)]
+--------------------+
--Query--
select '$.g ? (exists (@.x ? (@ == 14)))'::jsonpath
--Result--
[('$."g"?(exists (@."x"?(@ == 14)))',)]
+--------------------+
--Query--
select '$.g ? ((@.x >= 123 || @.a == 4) && exists (@.x ? (@ == 14)))'::jsonpath
--Result--
[('$."g"?((@."x" >= 123 || @."a" == 4) && exists (@."x"?(@ == 14)))',)]
+--------------------+
--Query--
select '$.g ? (+@.x >= +-(+@.a + 2))'::jsonpath
--Result--
[('$."g"?(+@."x" >= +(-(+@."a" + 2)))',)]
+--------------------+
--Query--
select '$a'::jsonpath
--Result--
[('$"a"',)]
+--------------------+
--Query--
select '$a.b'::jsonpath
--Result--
[('$"a"."b"',)]
+--------------------+
--Query--
select '$a[*]'::jsonpath
--Result--
[('$"a"[*]',)]
+--------------------+
--Query--
select '$.g ? (@.zip == $zip)'::jsonpath
--Result--
[('$."g"?(@."zip" == $"zip")',)]
+--------------------+
--Query--
select '$.a[1,2, 3 to 16]'::jsonpath
--Result--
[('$."a"[1,2,3 to 16]',)]
+--------------------+
--Query--
select '$.a[$a + 1, ($b[*]) to -($[0] * 2)]'::jsonpath
--Result--
[('$."a"[$"a" + 1,$"b"[*] to -($[0] * 2)]',)]
+--------------------+
--Query--
select '$.a[$.a.size() - 3]'::jsonpath
--Result--
[('$."a"[$."a".size() - 3]',)]
+--------------------+
--Query--
select '"last"'::jsonpath
--Result--
[('"last"',)]
+--------------------+
--Query--
select '$.last'::jsonpath
--Result--
[('$."last"',)]
+--------------------+
--Query--
select '$[last]'::jsonpath
--Result--
[('$[last]',)]
+--------------------+
--Query--
select '$[$[0] ? (last > 0)]'::jsonpath
--Result--
[('$[$[0]?(last > 0)]',)]
+--------------------+
--Query--
select 'null.type()'::jsonpath
--Result--
[('null.type()',)]
+--------------------+
--Query--
select '(1).type()'::jsonpath
--Result--
[('(1).type()',)]
+--------------------+
--Query--
select '1.2.type()'::jsonpath
--Result--
[('(1.2).type()',)]
+--------------------+
--Query--
select '"aaa".type()'::jsonpath
--Result--
[('"aaa".type()',)]
+--------------------+
--Query--
select 'true.type()'::jsonpath
--Result--
[('true.type()',)]
+--------------------+
--Query--
select '$.double().floor().ceiling().abs()'::jsonpath
--Result--
[('$.double().floor().ceiling().abs()',)]
+--------------------+
--Query--
select '$.keyvalue().key'::jsonpath
--Result--
[('$.keyvalue()."key"',)]
+--------------------+
--Query--
select '$.datetime()'::jsonpath
--Result--
[('$.datetime()',)]
+--------------------+
--Query--
select '$.datetime("datetime template")'::jsonpath
--Result--
[('$.datetime("datetime template")',)]
+--------------------+
--Query--
select '$ ? (@ starts with "abc")'::jsonpath
--Result--
[('$?(@ starts with "abc")',)]
+--------------------+
--Query--
select '$ ? (@ starts with $var)'::jsonpath
--Result--
[('$?(@ starts with $"var")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern")'::jsonpath
--Result--
[('$?(@ like_regex "pattern")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "")'::jsonpath
--Result--
[('$?(@ like_regex "pattern")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "i")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "i")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "is")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "is")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "isim")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "ism")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "q")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "q")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "iq")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "iq")',)]
+--------------------+
--Query--
select '$ ? (@ like_regex "pattern" flag "smixq")'::jsonpath
--Result--
[('$?(@ like_regex "pattern" flag "ismxq")',)]
+--------------------+
--Query--
select '$ < 1'::jsonpath
--Result--
[('($ < 1)',)]
+--------------------+
--Query--
select '($ < 1) || $.a.b <= $x'::jsonpath
--Result--
[('($ < 1 || $."a"."b" <= $"x")',)]
+--------------------+
--Query--
select '($).a.b'::jsonpath
--Result--
[('$."a"."b"',)]
+--------------------+
--Query--
select '($.a.b).c.d'::jsonpath
--Result--
[('$."a"."b"."c"."d"',)]
+--------------------+
--Query--
select '($.a.b + -$.x.y).c.d'::jsonpath
--Result--
[('($."a"."b" + -$."x"."y")."c"."d"',)]
+--------------------+
--Query--
select '(-+$.a.b).c.d'::jsonpath
--Result--
[('(-(+$."a"."b"))."c"."d"',)]
+--------------------+
--Query--
select '1 + ($.a.b + 2).c.d'::jsonpath
--Result--
[('(1 + ($."a"."b" + 2)."c"."d")',)]
+--------------------+
--Query--
select '1 + ($.a.b > 2).c.d'::jsonpath
--Result--
[('(1 + ($."a"."b" > 2)."c"."d")',)]
+--------------------+
--Query--
select '($)'::jsonpath
--Result--
[('$',)]
+--------------------+
--Query--
select '(($))'::jsonpath
--Result--
[('$',)]
+--------------------+
--Query--
select '((($ + 1)).a + ((2)).b ? ((((@ > 1)) || (exists(@.c)))))'::jsonpath
--Result--
[('(($ + 1)."a" + (2)."b"?(@ > 1 || exists (@."c")))',)]
+--------------------+
--Query--
select '$ ? (@.a < 1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -1)'::jsonpath
--Result--
[('$?(@."a" < -1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < .1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -.1)'::jsonpath
--Result--
[('$?(@."a" < -0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +.1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 0.1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -0.1)'::jsonpath
--Result--
[('$?(@."a" < -0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +0.1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 10.1)'::jsonpath
--Result--
[('$?(@."a" < 10.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -10.1)'::jsonpath
--Result--
[('$?(@."a" < -10.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +10.1)'::jsonpath
--Result--
[('$?(@."a" < 10.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 1e1)'::jsonpath
--Result--
[('$?(@."a" < 10)',)]
+--------------------+
--Query--
select '$ ? (@.a < -1e1)'::jsonpath
--Result--
[('$?(@."a" < -10)',)]
+--------------------+
--Query--
select '$ ? (@.a < +1e1)'::jsonpath
--Result--
[('$?(@."a" < 10)',)]
+--------------------+
--Query--
select '$ ? (@.a < .1e1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -.1e1)'::jsonpath
--Result--
[('$?(@."a" < -1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +.1e1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 0.1e1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -0.1e1)'::jsonpath
--Result--
[('$?(@."a" < -1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +0.1e1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 10.1e1)'::jsonpath
--Result--
[('$?(@."a" < 101)',)]
+--------------------+
--Query--
select '$ ? (@.a < -10.1e1)'::jsonpath
--Result--
[('$?(@."a" < -101)',)]
+--------------------+
--Query--
select '$ ? (@.a < +10.1e1)'::jsonpath
--Result--
[('$?(@."a" < 101)',)]
+--------------------+
--Query--
select '$ ? (@.a < 1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -1e-1)'::jsonpath
--Result--
[('$?(@."a" < -0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.1)',)]
+--------------------+
--Query--
select '$ ? (@.a < .1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < -.1e-1)'::jsonpath
--Result--
[('$?(@."a" < -0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < +.1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < 0.1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < -0.1e-1)'::jsonpath
--Result--
[('$?(@."a" < -0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < +0.1e-1)'::jsonpath
--Result--
[('$?(@."a" < 0.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < 10.1e-1)'::jsonpath
--Result--
[('$?(@."a" < 1.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < -10.1e-1)'::jsonpath
--Result--
[('$?(@."a" < -1.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < +10.1e-1)'::jsonpath
--Result--
[('$?(@."a" < 1.01)',)]
+--------------------+
--Query--
select '$ ? (@.a < 1e+1)'::jsonpath
--Result--
[('$?(@."a" < 10)',)]
+--------------------+
--Query--
select '$ ? (@.a < -1e+1)'::jsonpath
--Result--
[('$?(@."a" < -10)',)]
+--------------------+
--Query--
select '$ ? (@.a < +1e+1)'::jsonpath
--Result--
[('$?(@."a" < 10)',)]
+--------------------+
--Query--
select '$ ? (@.a < .1e+1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -.1e+1)'::jsonpath
--Result--
[('$?(@."a" < -1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +.1e+1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 0.1e+1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < -0.1e+1)'::jsonpath
--Result--
[('$?(@."a" < -1)',)]
+--------------------+
--Query--
select '$ ? (@.a < +0.1e+1)'::jsonpath
--Result--
[('$?(@."a" < 1)',)]
+--------------------+
--Query--
select '$ ? (@.a < 10.1e+1)'::jsonpath
--Result--
[('$?(@."a" < 101)',)]
+--------------------+
--Query--
select '$ ? (@.a < -10.1e+1)'::jsonpath
--Result--
[('$?(@."a" < -101)',)]
+--------------------+
--Query--
select '$ ? (@.a < +10.1e+1)'::jsonpath
--Result--
[('$?(@."a" < 101)',)]
+--------------------+
--Query--
select '0'::jsonpath
--Result--
[('0',)]
+--------------------+
--Query--
select '0.0'::jsonpath
--Result--
[('0.0',)]
+--------------------+
--Query--
select '0.000'::jsonpath
--Result--
[('0.000',)]
+--------------------+
--Query--
select '0.000e1'::jsonpath
--Result--
[('0.00',)]
+--------------------+
--Query--
select '0.000e2'::jsonpath
--Result--
[('0.0',)]
+--------------------+
--Query--
select '0.000e3'::jsonpath
--Result--
[('0',)]
+--------------------+
--Query--
select '0.0010'::jsonpath
--Result--
[('0.0010',)]
+--------------------+
--Query--
select '0.0010e-1'::jsonpath
--Result--
[('0.00010',)]
+--------------------+
--Query--
select '0.0010e+1'::jsonpath
--Result--
[('0.010',)]
+--------------------+
--Query--
select '0.0010e+2'::jsonpath
--Result--
[('0.10',)]
+--------------------+
--Query--
select '.001'::jsonpath
--Result--
[('0.001',)]
+--------------------+
--Query--
select '.001e1'::jsonpath
--Result--
[('0.01',)]
+--------------------+
--Query--
select '1.'::jsonpath
--Result--
[('1',)]
+--------------------+
--Query--
select '1.e1'::jsonpath
--Result--
[('10',)]
+--------------------+
--Query--
select '1.2.e'::jsonpath
--Result--
[('(1.2)."e"',)]
+--------------------+
--Query--
select '(1.2).e'::jsonpath
--Result--
[('(1.2)."e"',)]
+--------------------+
--Query--
select '1e3'::jsonpath
--Result--
[('1000',)]
+--------------------+
--Query--
select '1.e3'::jsonpath
--Result--
[('1000',)]
+--------------------+
--Query--
select '1.e3.e'::jsonpath
--Result--
[('(1000)."e"',)]
+--------------------+
--Query--
select '1.e3.e4'::jsonpath
--Result--
[('(1000)."e4"',)]
+--------------------+
--Query--
select '1.2e3'::jsonpath
--Result--
[('1200',)]
+--------------------+
--Query--
select '1.2.e3'::jsonpath
--Result--
[('(1.2)."e3"',)]
+--------------------+
--Query--
select '(1.2).e3'::jsonpath
--Result--
[('(1.2)."e3"',)]
+--------------------+
--Query--
select '1..e'::jsonpath
--Result--
[('(1)."e"',)]
+--------------------+
--Query--
select '1..e3'::jsonpath
--Result--
[('(1)."e3"',)]
+--------------------+
--Query--
select '(1.).e'::jsonpath
--Result--
[('(1)."e"',)]
+--------------------+
--Query--
select '(1.).e3'::jsonpath
--Result--
[('(1)."e3"',)]
+--------------------+
--Query--
select '1?(2>3)'::jsonpath
--Result--
[('(1)?(2 > 3)',)]
+--------------------+
--Query--
select '0b100101'::jsonpath
--Result--
[('37',)]
+--------------------+
--Query--
select '0o273'::jsonpath
--Result--
[('187',)]
+--------------------+
--Query--
select '0x42F'::jsonpath
--Result--
[('1071',)]
+--------------------+
--Query--
select '1_000_000'::jsonpath
--Result--
[('1000000',)]
+--------------------+
--Query--
select '1_2_3'::jsonpath
--Result--
[('123',)]
+--------------------+
--Query--
select '0x1EEE_FFFF'::jsonpath
--Result--
[('518979583',)]
+--------------------+
--Query--
select '0o2_73'::jsonpath
--Result--
[('187',)]
+--------------------+
--Query--
select '0b10_0101'::jsonpath
--Result--
[('37',)]
+--------------------+
--Query--
select '1_000.000_005'::jsonpath
--Result--
[('1000.000005',)]
+--------------------+
--Query--
select '1_000.'::jsonpath
--Result--
[('1000',)]
+--------------------+
--Query--
select '.000_005'::jsonpath
--Result--
[('0.000005',)]
+--------------------+
--Query--
select '1_000.5e0_1'::jsonpath
--Result--
[('10005',)]
+--------------------+
--Query--
SELECT str as jsonpath,        pg_input_is_valid(str,'jsonpath') as ok,        errinfo.sql_error_code,        errinfo.message,        errinfo.detail,        errinfo.hint FROM unnest(ARRAY['$ ? (@ like_regex "pattern" flag "smixq")'::text,                   '$ ? (@ like_regex "pattern" flag "a")',                   '@ + 1',                   '00',                   '1a']) str,      LATERAL pg_input_error_info(str, 'jsonpath') as errinfo
--Result--
[('$ ? (@ like_regex "pattern" flag "smixq")', True, None, None, None, None), ('$ ? (@ like_regex "pattern" flag "a")', False, '42601', 'invalid input syntax for type jsonpath', 'Unrecognized flag character "a" in LIKE_REGEX predicate.', None), ('@ + 1', False, '42601', '@ is not allowed in root expressions', None, None), ('00', False, '42601', 'trailing junk after numeric literal at or near "00" of jsonpath input', None, None), ('1a', False, '42601', 'trailing junk after numeric literal at or near "1a" of jsonpath input', None, None)]
+--------------------+
