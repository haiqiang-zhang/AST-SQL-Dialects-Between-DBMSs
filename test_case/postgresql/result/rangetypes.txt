--Query--
select pg_input_is_valid('(1,4)', 'int4range')
--Result--
[(True,)]
+--------------------+
--Query--
select * from pg_input_error_info('(1,4', 'int4range')
--Result--
[('malformed range literal: "(1,4"', 'Unexpected end of input.', None, '22P02')]
+--------------------+
--Query--
SELECT nr, isempty(nr), lower(nr), upper(nr) FROM numrange_test
--Result--
[(NumericRange(None, None, '()'), False, None, None), (NumericRange(Decimal('3'), None, '[)'), False, 3.0, None), (NumericRange(None, Decimal('5'), '()'), False, None, 5.0), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'), False, 1.1, 2.2), (NumericRange(empty=True), True, None, None), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'), False, 1.7, 1.7)]
+--------------------+
--Query--
SELECT nr, lower_inc(nr), lower_inf(nr), upper_inc(nr), upper_inf(nr) FROM numrange_test
--Result--
[(NumericRange(None, None, '()'), False, True, False, True), (NumericRange(Decimal('3'), None, '[)'), True, False, False, True), (NumericRange(None, Decimal('5'), '()'), False, True, False, False), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'), True, False, False, False), (NumericRange(empty=True), False, False, False, False), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'), True, False, True, False)]
+--------------------+
--Query--
SELECT * FROM numrange_test WHERE range_contains(nr, numrange(1.9,1.91))
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
SELECT * FROM numrange_test WHERE nr @> numrange(1.0,10000.1)
--Result--
[(NumericRange(None, None, '()'),)]
+--------------------+
--Query--
SELECT * FROM numrange_test WHERE range_contained_by(numrange(-1e7,-10000.1), nr)
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(None, Decimal('5'), '()'),)]
+--------------------+
--Query--
SELECT * FROM numrange_test WHERE 1.9 <@ nr
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select * from numrange_test where nr = 'empty'
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
select * from numrange_test where nr = '(1.1, 2.2)'
--Result--
[]
+--------------------+
--Query--
select * from numrange_test where nr = '[1.1, 2.2)'
--Result--
[(NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select * from numrange_test where nr < 'empty'
--Result--
[]
+--------------------+
--Query--
select * from numrange_test where nr < numrange(-1000.0, -1000.0,'[]')
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(empty=True),)]
+--------------------+
--Query--
select * from numrange_test where nr < numrange(0.0, 1.0,'[]')
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(empty=True),)]
+--------------------+
--Query--
select * from numrange_test where nr < numrange(1000.0, 1001.0,'[]')
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(Decimal('3'), None, '[)'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(empty=True),), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'),)]
+--------------------+
--Query--
select * from numrange_test where nr <= 'empty'
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
select * from numrange_test where nr >= 'empty'
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(Decimal('3'), None, '[)'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(empty=True),), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'),)]
+--------------------+
--Query--
select * from numrange_test where nr > 'empty'
--Result--
[(NumericRange(None, None, '()'),), (NumericRange(Decimal('3'), None, '[)'),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'),)]
+--------------------+
--Query--
select * from numrange_test where nr > numrange(-1001.0, -1000.0,'[]')
--Result--
[(NumericRange(Decimal('3'), None, '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'),)]
+--------------------+
--Query--
select * from numrange_test where nr > numrange(0.0, 1.0,'[]')
--Result--
[(NumericRange(Decimal('3'), None, '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.7'), Decimal('1.7'), '[]'),)]
+--------------------+
--Query--
select * from numrange_test where nr > numrange(1000.0, 1000.0,'[]')
--Result--
[]
+--------------------+
--Query--
select numrange(2.0, 3.0) -|- numrange(3.0, 4.0)
--Result--
[(True,)]
+--------------------+
--Query--
select range_adjacent(numrange(2.0, 3.0), numrange(3.1, 4.0))
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.1, 3.3) <@ numrange(0.1,10.1)
--Result--
[(True,)]
+--------------------+
--Query--
select numrange(0.1, 10.1) <@ numrange(1.1,3.3)
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.1, 2.2) - numrange(2.0, 3.0)
--Result--
[(NumericRange(Decimal('1.1'), Decimal('2.0'), '[)'),)]
+--------------------+
--Query--
select numrange(1.1, 2.2) - numrange(2.2, 3.0)
--Result--
[(NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select numrange(1.1, 2.2,'[]') - numrange(2.0, 3.0)
--Result--
[(NumericRange(Decimal('1.1'), Decimal('2.0'), '[)'),)]
+--------------------+
--Query--
select range_minus(numrange(10.1,12.2,'[]'), numrange(110.0,120.2,'(]'))
--Result--
[(NumericRange(Decimal('10.1'), Decimal('12.2'), '[]'),)]
+--------------------+
--Query--
select numrange(4.5, 5.5, '[]') && numrange(5.5, 6.5)
--Result--
[(True,)]
+--------------------+
--Query--
select numrange(1.0, 2.0) << numrange(3.0, 4.0)
--Result--
[(True,)]
+--------------------+
--Query--
select numrange(1.0, 3.0,'[]') << numrange(3.0, 4.0,'[]')
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.0, 3.0,'()') << numrange(3.0, 4.0,'()')
--Result--
[(True,)]
+--------------------+
--Query--
select numrange(1.0, 2.0) >> numrange(3.0, 4.0)
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.1, 2.2) < numrange(1.0, 200.2)
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.1, 2.2) < numrange(1.1, 1.2)
--Result--
[(False,)]
+--------------------+
--Query--
select numrange(1.0, 2.0) + numrange(2.0, 3.0)
--Result--
[(NumericRange(Decimal('1.0'), Decimal('3.0'), '[)'),)]
+--------------------+
--Query--
select numrange(1.0, 2.0) + numrange(1.5, 3.0)
--Result--
[(NumericRange(Decimal('1.0'), Decimal('3.0'), '[)'),)]
+--------------------+
--Query--
select range_merge(numrange(1.0, 2.0), numrange(2.0, 3.0))
--Result--
[(NumericRange(Decimal('1.0'), Decimal('3.0'), '[)'),)]
+--------------------+
--Query--
select numrange(1.0, 2.0) * numrange(2.0, 3.0)
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
select numrange(1.0, 2.0) * numrange(1.5, 3.0)
--Result--
[(NumericRange(Decimal('1.5'), Decimal('2.0'), '[)'),)]
+--------------------+
--Query--
select numrange(1.0, 2.0) * numrange(2.5, 3.0)
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
select range_intersect_agg(nr) from numrange_test
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
analyze numrange_test
--Result--
[]
+--------------------+
--Query--
select * from numrange_test2 where nr = 'empty'::numrange
--Result--
[(NumericRange(empty=True),)]
+--------------------+
--Query--
select * from numrange_test2 where nr = numrange(1.1, 2.2)
--Result--
[(NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select * from numrange_test2 where nr = numrange(1.1, 2.3)
--Result--
[]
+--------------------+
--Query--
select * from numrange_test natural join numrange_test2 order by nr
--Result--
[(NumericRange(empty=True),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select * from numrange_test natural join numrange_test2 order by nr
--Result--
[(NumericRange(empty=True),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select * from numrange_test natural join numrange_test2 order by nr
--Result--
[(NumericRange(empty=True),), (NumericRange(None, Decimal('5'), '()'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),), (NumericRange(Decimal('1.1'), Decimal('2.2'), '[)'),)]
+--------------------+
--Query--
select int4range(1, 10, '[]')
--Result--
[(NumericRange(1, 11, '[)'),)]
+--------------------+
--Query--
select daterange('2000-01-10'::date, '2000-01-20'::date, '[]')
--Result--
[(DateRange(datetime.date(2000, 1, 10), datetime.date(2000, 1, 21), '[)'),)]
+--------------------+
--Query--
analyze test_range_gist
--Result--
[]
+--------------------+
--Query--
select count(*) from test_range_gist where ir @> 'empty'::int4range
--Result--
[(6200,)]
+--------------------+
--Query--
explain (costs off) select ir from test_range_spgist where ir -|- int4range(10,20) order by ir
--Result--
[('Sort',), ('  Sort Key: ir',), ('  ->  Index Only Scan using test_range_spgist_idx on test_range_spgist',), ("        Index Cond: (ir -|- '[10,20)'::int4range)",)]
+--------------------+
--Query--
select ir from test_range_spgist where ir -|- int4range(10,20) order by ir
--Result--
[(NumericRange(20, 30, '[)'),), (NumericRange(20, 30, '[)'),), (NumericRange(20, 10020, '[)'),)]
+--------------------+
--Query--
explain (costs off) select count(*) from test_range_elem where int4range(i,i+10) <@ int4range(10,30)
--Result--
[('Aggregate',), ('  ->  Index Scan using test_range_elem_int4range_idx on test_range_elem',), ("        Index Cond: (int4range(i, (i + 10)) <@ '[10,30)'::int4range)",)]
+--------------------+
--Query--
select int8range(10000000000::int8, 20000000000::int8,'(]')
--Result--
[(NumericRange(10000000001, 20000000001, '[)'),)]
+--------------------+
--Query--
select '[2010-01-01 01:00:00 -05, 2010-01-01 02:00:00 -08)'::tstzrange
--Result--
[(DateTimeTZRange(datetime.datetime(2009, 12, 31, 22, 0, tzinfo=datetime.timezone(datetime.timedelta(days=-1, seconds=57600))), datetime.datetime(2010, 1, 1, 2, 0, tzinfo=datetime.timezone(datetime.timedelta(days=-1, seconds=57600))), '[)'),)]
+--------------------+
--Query--
select '[4,50)'::mydomainrange @> 7::mydomain
--Result--
[(True,)]
+--------------------+
--Query--
select '[4,5)'::restrictedrange @> 7
--Result--
[(False,)]
+--------------------+
--Query--
select textrange2('a','z') @> 'b'::text
--Result--
[(True,)]
+--------------------+
--Query--
select range_add_bounds(int4range(1, 17))
--Result--
[(18,)]
+--------------------+
--Query--
select rangetypes_sql(int4range(1,10), ARRAY[2,20])
--Result--
[(12,)]
+--------------------+
--Query--
select ARRAY[numrange(1.1, 1.2), numrange(12.3, 155.5)]
--Result--
[([NumericRange(Decimal('1.1'), Decimal('1.2'), '[)'), NumericRange(Decimal('12.3'), Decimal('155.5'), '[)')],)]
+--------------------+
--Query--
select * from i8r_array
--Result--
[(42, [NumericRange(1, 10, '[)'), NumericRange(2, 20, '[)')])]
+--------------------+
--Query--
select arrayrange(ARRAY[1,2], ARRAY[2,1])
--Result--
[('["{1,2}","{2,1}")',)]
+--------------------+
--Query--
select array[1,1] <@ arrayrange(array[1,2], array[2,1])
--Result--
[(False,)]
+--------------------+
--Query--
select array[1,3] <@ arrayrange(array[1,2], array[2,1])
--Result--
[(True,)]
+--------------------+
--Query--
select *, row_to_json(upper(t)) as u from   (values (two_ints_range(row(1,2), row(3,4))),           (two_ints_range(row(5,6), row(7,8)))) v(t)
--Result--
[('["(1,2)","(3,4)")', {'a': 3, 'b': 4}), ('["(5,6)","(7,8)")', {'a': 7, 'b': 8})]
+--------------------+
--Query--
select '(01,10)'::varbitrange except select '(10,11)'::varbitrange
--Result--
[('(01,10)',)]
+--------------------+
--Query--
select * from outparam_succeed(int4range(1,2))
--Result--
[(NumericRange(1, 2, '[)'), 'foo')]
+--------------------+
--Query--
select * from outparam2_succeed(int4range(1,11))
--Result--
[([1, 11], [11, 1])]
+--------------------+
--Query--
select * from outparam_succeed2(int4range(int4range(1,2)))
--Result--
[([2], 'foo')]
+--------------------+
--Query--
select * from inoutparam_succeed(int4range(1,2))
--Result--
[(2, NumericRange(1, 2, '[)'))]
+--------------------+
--Query--
select * from table_succeed(int4range(1,11))
--Result--
[(1, 11)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange 'empty'
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ 'empty'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange(NULL, NULL)
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '(,)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange('2000-01-01', NULL, '[)')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '[2000-01-01,)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange(NULL, '2000-01-01', '(]')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '(,2000-01-02)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange('-Infinity', '1997-04-10'::date, '()')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '(-infinity,1997-04-10)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange('-Infinity', '1997-04-10'::date, '[)')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '[-infinity,1997-04-10)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange('2002-09-25'::date, 'Infinity', '[)')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '[2002-09-25,infinity)'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select current_date <@ daterange('2002-09-25'::date, 'Infinity', '[]')
--Result--
[('Result',), ("  Output: (CURRENT_DATE <@ '[2002-09-25,infinity]'::daterange)",)]
+--------------------+
--Query--
explain (verbose, costs off) select daterange('-Infinity', '1997-04-10'::date, '()') @> current_date
--Result--
[('Result',), ("  Output: ('(-infinity,1997-04-10)'::daterange @> CURRENT_DATE)",)]
+--------------------+
--Query--
explain (verbose, costs off) select daterange('2002-09-25'::date, 'Infinity', '[]') @> current_date
--Result--
[('Result',), ("  Output: ('[2002-09-25,infinity]'::daterange @> CURRENT_DATE)",)]
+--------------------+
--Query--
explain (verbose, costs off) select now() <@ tstzrange('2024-01-20 00:00', '2024-01-21 00:00')
--Result--
[('Result',), ('  Output: (now() <@ \'["2024-01-20 00:00:00+01","2024-01-21 00:00:00+01")\'::tstzrange)',)]
+--------------------+
--Query--
explain (verbose, costs off)   select clock_timestamp() <@ tstzrange('2024-01-20 00:00', '2024-01-21 00:00')
--Result--
[('Result',), ('  Output: (clock_timestamp() <@ \'["2024-01-20 00:00:00+01","2024-01-21 00:00:00+01")\'::tstzrange)',)]
+--------------------+
--Query--
explain (verbose, costs off) select clock_timestamp() <@ tstzrange('2024-01-20 00:00', NULL)
--Result--
[('Result',), ('  Output: (clock_timestamp() <@ \'["2024-01-20 00:00:00+01",)\'::tstzrange)',)]
+--------------------+
--Query--
explain (costs off) select * from text_support_test where t <@ textrange_supp('a', 'd')
--Result--
[('Seq Scan on text_support_test',), ("  Filter: (t <@ '[a,d)'::textrange_supp)",)]
+--------------------+
--Query--
select * from text_support_test where t <@ textrange_supp('a', 'd')
--Result--
[('a',), ('c',), ('ch',)]
+--------------------+
