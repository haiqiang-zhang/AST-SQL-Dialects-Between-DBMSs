--Query--
vacuum analyze gist_point_tbl
--Result--
[]
+--------------------+
--Query--
reindex index gist_pointidx
--Result--
[]
+--------------------+
--Query--
vacuum analyze gist_tbl
--Result--
[]
+--------------------+
--Query--
explain (costs off) select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5))
--Result--
[('Index Only Scan using gist_tbl_point_index on gist_tbl',), ("  Index Cond: (p <@ '(0.5,0.5),(0,0)'::box)",)]
+--------------------+
--Query--
select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5))
--Result--
[('(0,0)',), ('(0.05,0.05)',), ('(0.1,0.1)',), ('(0.15,0.15)',), ('(0.2,0.2)',), ('(0.25,0.25)',), ('(0.3,0.3)',), ('(0.35,0.35)',), ('(0.4,0.4)',), ('(0.45,0.45)',), ('(0.5,0.5)',)]
+--------------------+
--Query--
explain (costs off) select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5)) order by p <-> point(0.201, 0.201)
--Result--
[('Index Only Scan using gist_tbl_point_index on gist_tbl',), ("  Index Cond: (p <@ '(0.5,0.5),(0,0)'::box)",), ("  Order By: (p <-> '(0.201,0.201)'::point)",)]
+--------------------+
--Query--
select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5)) order by p <-> point(0.201, 0.201)
--Result--
[('(0.2,0.2)',), ('(0.25,0.25)',), ('(0.15,0.15)',), ('(0.3,0.3)',), ('(0.1,0.1)',), ('(0.35,0.35)',), ('(0.05,0.05)',), ('(0.4,0.4)',), ('(0,0)',), ('(0.45,0.45)',), ('(0.5,0.5)',)]
+--------------------+
--Query--
explain (costs off) select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5)) order by point(0.101, 0.101) <-> p
--Result--
[('Index Only Scan using gist_tbl_point_index on gist_tbl',), ("  Index Cond: (p <@ '(0.5,0.5),(0,0)'::box)",), ("  Order By: (p <-> '(0.101,0.101)'::point)",)]
+--------------------+
--Query--
select p from gist_tbl where p <@ box(point(0,0), point(0.5, 0.5)) order by point(0.101, 0.101) <-> p
--Result--
[('(0.1,0.1)',), ('(0.15,0.15)',), ('(0.05,0.05)',), ('(0.2,0.2)',), ('(0,0)',), ('(0.25,0.25)',), ('(0.3,0.3)',), ('(0.35,0.35)',), ('(0.4,0.4)',), ('(0.45,0.45)',), ('(0.5,0.5)',)]
+--------------------+
--Query--
explain (costs off) select p from   (values (box(point(0,0), point(0.5,0.5))),           (box(point(0.5,0.5), point(0.75,0.75))),           (box(point(0.8,0.8), point(1.0,1.0)))) as v(bb) cross join lateral   (select p from gist_tbl where p <@ bb order by p <-> bb[0] limit 2) ss
--Result--
[('Nested Loop',), ('  ->  Values Scan on "*VALUES*"',), ('  ->  Limit',), ('        ->  Index Only Scan using gist_tbl_point_index on gist_tbl',), ('              Index Cond: (p <@ "*VALUES*".column1)',), ('              Order By: (p <-> ("*VALUES*".column1)[0])',)]
+--------------------+
--Query--
select p from   (values (box(point(0,0), point(0.5,0.5))),           (box(point(0.5,0.5), point(0.75,0.75))),           (box(point(0.8,0.8), point(1.0,1.0)))) as v(bb) cross join lateral   (select p from gist_tbl where p <@ bb order by p <-> bb[0] limit 2) ss
--Result--
[('(0.5,0.5)',), ('(0.45,0.45)',), ('(0.75,0.75)',), ('(0.7,0.7)',), ('(1,1)',), ('(0.95,0.95)',)]
+--------------------+
--Query--
explain (costs off) select b from gist_tbl where b <@ box(point(5,5), point(6,6))
--Result--
[('Index Only Scan using gist_tbl_box_index on gist_tbl',), ("  Index Cond: (b <@ '(6,6),(5,5)'::box)",)]
+--------------------+
--Query--
select b from gist_tbl where b <@ box(point(5,5), point(6,6))
--Result--
[('(5,5),(5,5)',), ('(5.05,5.05),(5.05,5.05)',), ('(5.1,5.1),(5.1,5.1)',), ('(5.15,5.15),(5.15,5.15)',), ('(5.2,5.2),(5.2,5.2)',), ('(5.25,5.25),(5.25,5.25)',), ('(5.3,5.3),(5.3,5.3)',), ('(5.35,5.35),(5.35,5.35)',), ('(5.4,5.4),(5.4,5.4)',), ('(5.45,5.45),(5.45,5.45)',), ('(5.5,5.5),(5.5,5.5)',), ('(5.55,5.55),(5.55,5.55)',), ('(5.6,5.6),(5.6,5.6)',), ('(5.65,5.65),(5.65,5.65)',), ('(5.7,5.7),(5.7,5.7)',), ('(5.75,5.75),(5.75,5.75)',), ('(5.8,5.8),(5.8,5.8)',), ('(5.85,5.85),(5.85,5.85)',), ('(5.9,5.9),(5.9,5.9)',), ('(5.95,5.95),(5.95,5.95)',), ('(6,6),(6,6)',)]
+--------------------+
--Query--
explain (costs off) select b from gist_tbl where b <@ box(point(5,5), point(6,6)) order by b <-> point(5.2, 5.91)
--Result--
[('Index Only Scan using gist_tbl_box_index on gist_tbl',), ("  Index Cond: (b <@ '(6,6),(5,5)'::box)",), ("  Order By: (b <-> '(5.2,5.91)'::point)",)]
+--------------------+
--Query--
select b from gist_tbl where b <@ box(point(5,5), point(6,6)) order by b <-> point(5.2, 5.91)
--Result--
[('(5.55,5.55),(5.55,5.55)',), ('(5.6,5.6),(5.6,5.6)',), ('(5.5,5.5),(5.5,5.5)',), ('(5.65,5.65),(5.65,5.65)',), ('(5.45,5.45),(5.45,5.45)',), ('(5.7,5.7),(5.7,5.7)',), ('(5.4,5.4),(5.4,5.4)',), ('(5.75,5.75),(5.75,5.75)',), ('(5.35,5.35),(5.35,5.35)',), ('(5.8,5.8),(5.8,5.8)',), ('(5.3,5.3),(5.3,5.3)',), ('(5.85,5.85),(5.85,5.85)',), ('(5.25,5.25),(5.25,5.25)',), ('(5.9,5.9),(5.9,5.9)',), ('(5.2,5.2),(5.2,5.2)',), ('(5.95,5.95),(5.95,5.95)',), ('(5.15,5.15),(5.15,5.15)',), ('(6,6),(6,6)',), ('(5.1,5.1),(5.1,5.1)',), ('(5.05,5.05),(5.05,5.05)',), ('(5,5),(5,5)',)]
+--------------------+
--Query--
explain (costs off) select b from gist_tbl where b <@ box(point(5,5), point(6,6)) order by point(5.2, 5.91) <-> b
--Result--
[('Index Only Scan using gist_tbl_box_index on gist_tbl',), ("  Index Cond: (b <@ '(6,6),(5,5)'::box)",), ("  Order By: (b <-> '(5.2,5.91)'::point)",)]
+--------------------+
--Query--
select b from gist_tbl where b <@ box(point(5,5), point(6,6)) order by point(5.2, 5.91) <-> b
--Result--
[('(5.55,5.55),(5.55,5.55)',), ('(5.6,5.6),(5.6,5.6)',), ('(5.5,5.5),(5.5,5.5)',), ('(5.65,5.65),(5.65,5.65)',), ('(5.45,5.45),(5.45,5.45)',), ('(5.7,5.7),(5.7,5.7)',), ('(5.4,5.4),(5.4,5.4)',), ('(5.75,5.75),(5.75,5.75)',), ('(5.35,5.35),(5.35,5.35)',), ('(5.8,5.8),(5.8,5.8)',), ('(5.3,5.3),(5.3,5.3)',), ('(5.85,5.85),(5.85,5.85)',), ('(5.25,5.25),(5.25,5.25)',), ('(5.9,5.9),(5.9,5.9)',), ('(5.2,5.2),(5.2,5.2)',), ('(5.95,5.95),(5.95,5.95)',), ('(5.15,5.15),(5.15,5.15)',), ('(6,6),(6,6)',), ('(5.1,5.1),(5.1,5.1)',), ('(5.05,5.05),(5.05,5.05)',), ('(5,5),(5,5)',)]
+--------------------+
--Query--
explain (costs off) select p, c from gist_tbl where p <@ box(point(5,5), point(6, 6))
--Result--
[('Index Scan using gist_tbl_multi_index on gist_tbl',), ("  Index Cond: (p <@ '(6,6),(5,5)'::box)",)]
+--------------------+
--Query--
select b, p from gist_tbl where b <@ box(point(4.5, 4.5), point(5.5, 5.5)) and p <@ box(point(5,5), point(6, 6))
--Result--
[('(5,5),(5,5)', '(5,5)'), ('(5.05,5.05),(5.05,5.05)', '(5.05,5.05)'), ('(5.1,5.1),(5.1,5.1)', '(5.1,5.1)'), ('(5.15,5.15),(5.15,5.15)', '(5.15,5.15)'), ('(5.2,5.2),(5.2,5.2)', '(5.2,5.2)'), ('(5.25,5.25),(5.25,5.25)', '(5.25,5.25)'), ('(5.3,5.3),(5.3,5.3)', '(5.3,5.3)'), ('(5.35,5.35),(5.35,5.35)', '(5.35,5.35)'), ('(5.4,5.4),(5.4,5.4)', '(5.4,5.4)'), ('(5.45,5.45),(5.45,5.45)', '(5.45,5.45)'), ('(5.5,5.5),(5.5,5.5)', '(5.5,5.5)')]
+--------------------+
--Query--
explain (verbose, costs off) select circle(p,1) from gist_tbl where p <@ box(point(5, 5), point(5.3, 5.3))
--Result--
[('Index Only Scan using gist_tbl_multi_index on public.gist_tbl',), ("  Output: circle(p, '1'::double precision)",), ("  Index Cond: (gist_tbl.p <@ '(5.3,5.3),(5,5)'::box)",)]
+--------------------+
--Query--
select circle(p,1) from gist_tbl where p <@ box(point(5, 5), point(5.3, 5.3))
--Result--
[('<(5,5),1>',), ('<(5.05,5.05),1>',), ('<(5.1,5.1),1>',), ('<(5.15,5.15),1>',), ('<(5.2,5.2),1>',), ('<(5.25,5.25),1>',), ('<(5.3,5.3),1>',)]
+--------------------+
--Query--
explain (verbose, costs off) select p from gist_tbl where circle(p,1) @> circle(point(0,0),0.95)
--Result--
[('Index Only Scan using gist_tbl_multi_index on public.gist_tbl',), ('  Output: p',), ("  Index Cond: ((circle(gist_tbl.p, '1'::double precision)) @> '<(0,0),0.95>'::circle)",)]
+--------------------+
--Query--
select p from gist_tbl where circle(p,1) @> circle(point(0,0),0.95)
--Result--
[('(0,0)',)]
+--------------------+
--Query--
explain (verbose, costs off) select count(*) from gist_tbl
--Result--
[('Aggregate',), ('  Output: count(*)',), ('  ->  Index Only Scan using gist_tbl_multi_index on public.gist_tbl',)]
+--------------------+
--Query--
select count(*) from gist_tbl
--Result--
[(10001,)]
+--------------------+
--Query--
explain (verbose, costs off) select p from gist_tbl order by circle(p,1) <-> point(0,0) limit 1
--Result--
[('Limit',), ("  Output: p, ((circle(p, '1'::double precision) <-> '(0,0)'::point))",), ('  ->  Index Only Scan using gist_tbl_multi_index on public.gist_tbl',), ("        Output: p, (circle(p, '1'::double precision) <-> '(0,0)'::point)",), ("        Order By: ((circle(gist_tbl.p, '1'::double precision)) <-> '(0,0)'::point)",)]
+--------------------+
