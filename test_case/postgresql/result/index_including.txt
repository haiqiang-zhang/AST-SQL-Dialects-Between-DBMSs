--Query--
SELECT pg_get_indexdef(i.indexrelid) FROM pg_index i JOIN pg_class c ON i.indexrelid = c.oid WHERE i.indrelid = 'tbl_include_reg'::regclass ORDER BY c.relname
--Result--
[('CREATE INDEX tbl_include_reg_c1_c2_c11_c3_idx ON public.tbl_include_reg USING btree (c1, c2) INCLUDE (c1, c3)',), ('CREATE INDEX tbl_include_reg_idx ON public.tbl_include_reg USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT pg_get_indexdef(i.indexrelid) FROM pg_index i JOIN pg_class c ON i.indexrelid = c.oid WHERE i.indrelid = 'tbl_include_unique1'::regclass ORDER BY c.relname
--Result--
[('CREATE UNIQUE INDEX tbl_include_unique1_c1_c2_c3_c4_key ON public.tbl_include_unique1 USING btree (c1, c2) INCLUDE (c3, c4)',), ('CREATE UNIQUE INDEX tbl_include_unique1_idx_unique ON public.tbl_include_unique1 USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT pg_get_indexdef(i.indexrelid) FROM pg_index i JOIN pg_class c ON i.indexrelid = c.oid WHERE i.indrelid = 'tbl_include_pk'::regclass ORDER BY c.relname
--Result--
[('CREATE UNIQUE INDEX tbl_include_pk_pkey ON public.tbl_include_pk USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT pg_get_indexdef(i.indexrelid) FROM pg_index i JOIN pg_class c ON i.indexrelid = c.oid WHERE i.indrelid = 'tbl_include_box'::regclass ORDER BY c.relname
--Result--
[('CREATE UNIQUE INDEX tbl_include_box_idx_unique ON public.tbl_include_box USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT indexrelid::regclass, indnatts, indnkeyatts, indisunique, indisprimary, indkey, indclass FROM pg_index WHERE indrelid = 'tbl'::regclass::oid
--Result--
[('covering', 4, 2, True, False, '1 2 3 4', '1978 1978')]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid), conname, conkey FROM pg_constraint WHERE conrelid = 'tbl'::regclass::oid
--Result--
[('UNIQUE (c1, c2) INCLUDE (c3, c4)', 'covering', [1, 2])]
+--------------------+
--Query--
SELECT indexrelid::regclass, indnatts, indnkeyatts, indisunique, indisprimary, indkey, indclass FROM pg_index WHERE indrelid = 'tbl'::regclass::oid
--Result--
[('covering', 4, 2, True, True, '1 2 3 4', '1978 1978')]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid), conname, conkey FROM pg_constraint WHERE conrelid = 'tbl'::regclass::oid
--Result--
[('PRIMARY KEY (c1, c2) INCLUDE (c3, c4)', 'covering', [1, 2])]
+--------------------+
--Query--
explain (costs off) select * from tbl where (c1,c2,c3) < (2,5,1)
--Result--
[('Bitmap Heap Scan on tbl',), ('  Filter: (ROW(c1, c2, c3) < ROW(2, 5, 1))',), ('  ->  Bitmap Index Scan on covering',), ('        Index Cond: (ROW(c1, c2) <= ROW(2, 5))',)]
+--------------------+
--Query--
select * from tbl where (c1,c2,c3) < (2,5,1)
--Result--
[(1, 2, None, None), (2, 4, None, None)]
+--------------------+
--Query--
explain (costs off) select * from tbl where (c1,c2,c3) < (262,1,1) limit 1
--Result--
[('Limit',), ('  ->  Index Only Scan using covering on tbl',), ('        Index Cond: (ROW(c1, c2) <= ROW(262, 1))',), ('        Filter: (ROW(c1, c2, c3) < ROW(262, 1, 1))',)]
+--------------------+
--Query--
select * from tbl where (c1,c2,c3) < (262,1,1) limit 1
--Result--
[(1, 2, None, None)]
+--------------------+
--Query--
SELECT indexrelid::regclass, indnatts, indnkeyatts, indisunique, indisprimary, indkey, indclass FROM pg_index WHERE indrelid = 'tbl'::regclass::oid
--Result--
[('tbl_c1_c2_c3_c4_key', 4, 2, True, False, '1 2 3 4', '1978 1978')]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid), conname, conkey FROM pg_constraint WHERE conrelid = 'tbl'::regclass::oid
--Result--
[('UNIQUE (c1, c2) INCLUDE (c3, c4)', 'tbl_c1_c2_c3_c4_key', [1, 2])]
+--------------------+
--Query--
SELECT indexrelid::regclass, indnatts, indnkeyatts, indisunique, indisprimary, indkey, indclass FROM pg_index WHERE indrelid = 'tbl'::regclass::oid
--Result--
[('tbl_pkey', 4, 2, True, True, '1 2 3 4', '1978 1978')]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid), conname, conkey FROM pg_constraint WHERE conrelid = 'tbl'::regclass::oid
--Result--
[('PRIMARY KEY (c1, c2) INCLUDE (c3, c4)', 'tbl_pkey', [1, 2])]
+--------------------+
--Query--
SELECT indexrelid::regclass, indnatts, indnkeyatts, indisunique, indisprimary, indkey, indclass FROM pg_index WHERE indrelid = 'tbl'::regclass::oid
--Result--
[('tbl_c1_c3_c4_excl', 3, 1, False, False, '1 3 4', '1978')]
+--------------------+
--Query--
SELECT pg_get_constraintdef(oid), conname, conkey FROM pg_constraint WHERE conrelid = 'tbl'::regclass::oid
--Result--
[('EXCLUDE USING btree (c1 WITH =) INCLUDE (c3, c4)', 'tbl_c1_c3_c4_excl', [1])]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[('CREATE UNIQUE INDEX tbl_idx ON public.tbl USING btree (c1, c2, c3, c4)',)]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[('CREATE UNIQUE INDEX tbl_idx ON public.tbl USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[('CREATE UNIQUE INDEX tbl_c1_c2_c3_c4_key ON public.tbl USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[('CREATE UNIQUE INDEX tbl_c1_c2_c3_c4_idx ON public.tbl USING btree (c1, c2) INCLUDE (c3, c4)',), ('CREATE UNIQUE INDEX tbl_c1_c2_c3_c4_key ON public.tbl USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[('CREATE UNIQUE INDEX tbl_c1_c2_c3_c4_key ON public.tbl USING btree (c1, c2) INCLUDE (c3, c4)',)]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
--Query--
SELECT indexdef FROM pg_indexes WHERE tablename = 'tbl' ORDER BY indexname
--Result--
[]
+--------------------+
